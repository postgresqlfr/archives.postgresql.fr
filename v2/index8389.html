
<!DOCTYPE
 html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
 <html>
 <!-- $Date: 2005/08/30 07:54:43 $ / $Revision: 1.29 $ / Last Theme Editor :$Author: jx $-->
  
<!-- Mirrored from drupal.postgresql.fr/?q=node/288 by HTTrack Website Copier/3.x [XR&CO'2006], Sun, 12 Oct 2008 17:09:01 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<base  />
<style type="text/css" media="all">@import "misc/drupal.css";</style>
   <title>PostgreSQL vs SQLServer... - PostgreSQLFr</title>
 <style type="text/css" media="screen" title="Normal Text">
    @import url("layout/css/blue/fixed.css");
    @import url(_guillaume/dotclear/themes/postgresql/style.html);
 </style>
 <style type="text/css" media="screen" title="Normal Text2">
    @import url("layout/css/blue/pgfr.css");
    @import url(_guillaume/dotclear/themes/postgresql/style.html);
 </style>
   </head>
   <body>
    <table border="0" cellspacing="5" cellpadding="0" width="100%">
     <tr>
      <!--td colspan="2" width="100%"-->
      <td colspan="2">
      <!-- Head -->
       <table border="0" cellspacing="0" cellpadding="0" width="100%">
        <tr>
	 <td align="left">
           <div id="pgHeader">
	    <div id="pgHeaderLogoLeft">
	     <a href="index.html" title="PostgreSQL"><img src="layout/images/hdr_left.png" width="230" height="80" alt="PostgreSQL" /></a>
	    </div>
	    <div id="pgHeaderLogoRight">
	     <a href="index.html" title="La base de donnÈes la plus sophistiquÈe au monde."><img src="layout/images/hdr_right.png" width="210" height="80" alt="La base de donnÈes la plus sophistiquÈe au monde." /></a>
	    </div>
	   </div>
         </td>
	 <td align="right">
         </td>
	</tr>
      </table> <!-- Head -->
      <br />
      <table border="0" cellspacing="0" cellpadding="0" width="100%">
              <tr>
	      	 <td align="left">

		<div class="pgTopNav">
		   <div class="pgTopNavLeft"> 
		     <img src="layout/images/nav_lft.png" width="7" height="23" alt="" />
		   </div>
		   <div class="pgTopNavRight">
		    <img src="layout/images/nav_rgt.png" width="7" height="23" alt="" />
		  </div>
		  <!--<ul class="pgTopNavList">-->
		  <ul class="pgTopNavList">
		   <li><a href="index03d2.html?q=" title="Retourner √† la page principale.">accueil</a> </li>
		   <li> <a href="indexf6e5.html?q=archive" title="Lire le contenu plus ancien dans notre archive.">archives</a> </li>
		   <li> <a href="index71c4.html?q=blog" title="Lire les blogues les plus r√©cents.">blogues</a> </li>

		   <li> <a href="indexf6fe.html?q=book" title="Lire et contribuer aux livres collaboratifs.">livres</a> </li>
		   <li> <a href="index79b7.html?q=forum">forums</a> </li>
		   <li> <a href="index729f.html?q=poll" title="Voir la liste des sondages de ce site.">sondages</a> </li>
		   <li> <a href="index4404.html?q=search" title="Chercher pour du contenu plus vieux.">recherche</a></li><li><a href="http://docs.postgresqlfr.org/" target="_blank">documentation </a></li>

		  </ul>

<!--
		   <li><a href="?q=" title="Retourner √† la page principale.">accueil</a> </li>
		   <li> <a href="?q=archive" title="Lire le contenu plus ancien dans notre archive.">archives</a> </li>
		   <li> <a href="?q=blog" title="Lire les blogues les plus r√©cents.">blogues</a> </li>
		   <li> <a href="?q=book" title="Lire et contribuer aux livres collaboratifs.">livres</a> </li>
		   <li> <a href="?q=forum">forums</a> </li>
		   <li> <a href="?q=poll" title="Voir la liste des sondages de ce site.">sondages</a> </li>
		   <li> <a href="?q=search" title="Chercher pour du contenu plus vieux.">recherche</a></li><li><a href="http://docs.postgresqlfr.org/" target="_blank">documentation </a></li>
-->
		  </ul>
	        </div>
		</td>
		</tr>
		</table>
      </td>
     </tr>
     <tr>
    <td style="vertical-align: top; width: 20%;">
<div class="block block-user" id="block-user-0">
<div class="pgSideNav">    <h2>Ouverture de session</h2>    
		    <div>
			<form action="http://drupal.postgresql.fr/?q=user/login" method="post">
<div class="user-login-block">
<input type="hidden" name="edit[destination]" value="node/288" />
<div class="form-item">
 <label for="edit-name">Nom d'utilisateur:</label><br />
 <input type="text" maxlength="64" class="form-text" name="edit[name]" id="edit-name" size="15" value="" />
</div>
<div class="form-item">
 <label for="edit-pass">Mot de passe:</label><br />
 <input type="password" class="form-password" maxlength="64" name="edit[pass]" id="edit-pass" size="15" value="" />
</div>
<input type="submit" class="form-submit" name="op" value="Identification"  />
</div>

</form>
<div class="item-list"><ul><li><a href="indexc12c.html?q=user/password" title="Demander un nouveau mot de passe par e-mail.">Demander un nouveau mot de passe</a></li></ul></div>
		    </div></div></div>
<div class="block block-user" id="block-user-1">
<div class="pgSideNav">    <h2>Navigation</h2>    
		    <div>
			<div class="menu">
<ul>
<li class="leaf"><a href="indexa499.html?q=tracker">messages r√©cents</a></li>

</ul>
</div>
		    </div></div></div>
<div class="block block-block" id="block-block-4">
<div class="pgSideNav">    <h2>Contactez-nous</h2>    
		    <div>
			<p><strong>Administration du site&nbsp;:</strong><br />
"equipe chez postgresqlfr point org"<br><br />
<strong>Contact presse&nbsp;:</strong><br />
"fr chez postgresql point org"<br><br />
<strong>Contact association&nbsp;:</strong><br />
"bureau chez postgresqlfr point org"<br><br />
<strong>Questions PostgreSQL&nbsp;:</strong><br />
&nbsp;IRC&nbsp;:<br />
&nbsp;&nbsp;serveur <strong>irc.freenode.net</strong><br />
&nbsp;&nbsp;canal <strong>#postgresqlfr</strong></p>

		    </div></div></div>
<div class="block block-block" id="block-block-1">
<div class="pgSideNav">    <h2>Liens</h2>    
		    <div>
			<p><small></p>
<ul>
<li>
<a href="http://www.postgresqlfr.org/?q=node/view/162">Adh√©rer</a>
</li>
<li>
<a href="http://www.postgresqlfr.org/?q=node/473">Faire un don</a>
</li>
<li>
<a href="http://www.postgresqlfr.org/?q=node/163">Consulter les statuts</a>
</li>
</ul>
<ul>
<li>
<a href="http://www.postgresql.org/" class="active">Site original<br />
</a>
</li>
<li>
<a href="http://docs.postgresqlfr.org/" class="active">Site de traduction</a>
</li>
<li>
<a href="http://docs.postgresqlfr.org/8.3/">Doc v.8.3.x fr</a>
</li>
<li>
<a href="http://docs.postgresqlfr.org/8.2/">Doc v.8.2.x fr</a>
</li>
<li>
<a href="http://docs.postgresqlfr.org/8.1/">Doc v.8.1.x fr</a>
</li>
<li>
<a href="http://docs.postgresqlfr.org/8.0/">Doc v.8.0.x fr</a>
</li>
<li>
<a href="http://docs.postgresqlfr.org/7.4/">Doc v.7.4.x fr</a>
</li>
<li>
<a href="http://www.postgis.fr/">PostGIS</a>
</li>
<li>
<a href="http://www.postgresql.org/docs/techdocs">Techdocs</a>
</li>
<li>
<a href="http://www.varlena.com/varlena/GeneralBits/Tidbits/">General TidBits</a>
</li>
<p><!--</p>
<li>
<a href="http://www.postgresqlfr.org/?q=node/view/58">Version Windows</a>
</li>
<p>--></p>
<li>
<a href="http://www.postgresqlfr.org/drupal/?q=node/view/63">T√©moignages de pros</a>
</li>
<li>
<a href="http://archives.postgresql.org/pgsql-fr-generale/">Liste de diffusion</a>
</li>
<li>
<a href="http://wwwmaster.postgresql.org/download/mirrors-ftp">T√©l√©charger</a>
</li>
</ul>
<p></small></p>

		    </div></div></div>
<div class="block block-block" id="block-block-2">
<div class="pgSideNav">    <h2>Recherche</h2>    
		    <div>
			<form action="http://drupal.postgresql.fr/?q=search" method="post">
<div id="search">
<input class="form-text" type="text" size="15" value="" name="keys" alt="Enter the terms you wish to search for." /><br />
<input class="form-submit" type="submit" value="Recherche" />
</div>
</form>

		    </div></div></div>
<div class="block block-forum" id="block-forum-0">
<div class="pgSideNav">    <h2>Sujets du forum</h2>    
		    <div>
			<div class="item-list"><h3>Sujets actifs</h3><ul><li><a href="index253f.html?q=node/1742">A LIRE : FERMETURE DES FORUMS DRUPAL</a></li><li><a href="indexfc2e.html?q=node/1739" title="2 commentaires">Probl√®me  avec pg_dump</a></li><li><a href="index97c1.html?q=node/1731" title="5 commentaires">Connexions simultann√©es</a></li><li><a href="index32d3.html?q=node/1737" title="1 commentaire">Optimisation de la m√©moire sous PostgreSQL</a></li><li><a href="index2483.html?q=node/1736" title="3 commentaires">[R√©solu] Upgrade Postgre -> types et op√©rateurs</a></li></ul></div><div class="item-list"><h3>Nouveaux sujets:</h3><ul><li><a href="index253f.html?q=node/1742">A LIRE : FERMETURE DES FORUMS DRUPAL</a></li><li><a href="indexfc2e.html?q=node/1739" title="2 commentaires">Probl√®me  avec pg_dump</a></li><li><a href="index32d3.html?q=node/1737" title="1 commentaire">Optimisation de la m√©moire sous PostgreSQL</a></li><li><a href="index2483.html?q=node/1736" title="3 commentaires">[R√©solu] Upgrade Postgre -> types et op√©rateurs</a></li><li><a href="index82c4.html?q=node/1734" title="2 commentaires">[RESOLU] Probleme de connection en odbc</a></li></ul></div><div class="more-link"><a href="index79b7.html?q=forum" title="Lire les derniers sujets.">en lire plus</a></div>
		    </div></div></div>
<div class="block block-archive" id="block-archive-0">
<div class="pgSideNav">    <h2>Acc√©der aux archives</h2>    
		    <div>
			
<!-- calendar -->
<div class="calendar"><table summary="Un calendrier pour acc√©der aux archives.">
 <caption><a href="index9dfb.html?q=archive/2008/09/12" title="Mois pr√©c√©dent">&laquo;</a> Octobre 2008 &nbsp;</caption>
 <tr class="header-week">
 <th abbr="Lundi">Lun</th>
 <th abbr="Mardi">Mar</th>
 <th abbr="Mercredi">Mer</th>
 <th abbr="Jeudi">Jeu</th>
 <th abbr="Vendredi">Ven</th>
 <th abbr="Samedi">Sam</th>
 <th abbr="Dimanche">Dim</th>
</tr>
 <tr class="row-week"><td class="day-blank" colspan="2">&nbsp;</td>
  <td class="day-link"><a href="indexd3e2.html?q=archive/2008/10/1">1</a></td>
  <td class="day-normal">2</td>
  <td class="day-normal">3</td>
  <td class="day-normal">4</td>
  <td class="day-normal">5</td>
 </tr>
 <tr class="row-week">
  <td class="day-normal">6</td>
  <td class="day-normal">7</td>
  <td class="day-normal">8</td>
  <td class="day-normal">9</td>
  <td class="day-normal">10</td>
  <td class="day-normal">11</td>
  <td class="day-today">12</td>
 </tr>
 <tr class="row-week">
  <td class="day-future">13</td>
  <td class="day-future">14</td>
  <td class="day-future">15</td>
  <td class="day-future">16</td>
  <td class="day-future">17</td>
  <td class="day-future">18</td>
  <td class="day-future">19</td>
 </tr>
 <tr class="row-week">
  <td class="day-future">20</td>
  <td class="day-future">21</td>
  <td class="day-future">22</td>
  <td class="day-future">23</td>
  <td class="day-future">24</td>
  <td class="day-future">25</td>
  <td class="day-future">26</td>
 </tr>
 <tr class="row-week">
  <td class="day-future">27</td>
  <td class="day-future">28</td>
  <td class="day-future">29</td>
  <td class="day-future">30</td>
  <td class="day-future">31</td>
  <td class="day-blank" colspan="2">&nbsp;</td>
 </tr>
</table></div>


		    </div></div></div>
<div class="block block-node" id="block-node-0">
<div class="pgSideNav">    <h2>Syndication</h2>    
		    <div>
			<div class="xml-icon"><a href="index9637.html?q=rss.xml"><img src="misc/xml.png" width="36" height="14" alt="Flux XML" title="Flux XML" /></a></div>
		    </div></div></div>
<div class="block block-poll" id="block-poll-0">
<div class="pgSideNav">    <h2>Sondage</h2>    
		    <div>
			<div class="poll"><div class="title">Quelle est la version de PostgreSQL la plus r√©pandue sur vos serveurs ?</div><div class="text">8.3</div><div class="bar"><div style="width: 10%;" class="foreground"></div></div><div class="percent">10%</div><div class="text">8.2</div><div class="bar"><div style="width: 42%;" class="foreground"></div></div><div class="percent">42%</div><div class="text">8.1</div><div class="bar"><div style="width: 40%;" class="foreground"></div></div><div class="percent">40%</div><div class="text">8.0</div><div class="bar"><div style="width: 2%;" class="foreground"></div></div><div class="percent">2%</div><div class="text">7.4</div><div class="bar"><div style="width: 6%;" class="foreground"></div></div><div class="percent">6%</div><div class="text">7.3 ou ant√©rieure</div><div class="bar"><div style="width: 0%;" class="foreground"></div></div><div class="percent">0%</div><div class="total">Nombre de votes: 48</div></div><div class="links"><a href="index8c57.html?q=node/1426#comment" title="Sauter au premier commentaire de ce message.">3 commentaires</a> | <a href="index729f.html?q=poll" title="Voir la liste des sondages de ce site.">anciens sondages</a></div>
		    </div></div></div>
    </td>

      <td style="vertical-align: top; width: 80%"><div class="breadcrumb"><a href="index03d2.html?q=">Accueil</a> &raquo; <a href="index79b7.html?q=forum">forums</a> &raquo; <a href="index395f.html?q=forum/12">Technique - optimisation</a></div><h2 class="title">PostgreSQL vs SQLServer...</h2>
<!-- begin content -->

<!-- node: "PostgreSQL vs SQLServer..." -->
<!--<div class="pgFrontCenterUser">
<div class="pgFrontUser">
<div class="pgFrontUserInner">
--><div class="pgFrontUserWrap">
 <div class="pgFrontUserContent">	<h1 class="plop"><a href="indexeb61.html?q=taxonomy/term/12">Technique - optimisation</a> | <a href="index8389.html?q=node/288" class="active">PostgreSQL vs SQLServer...</a></h1>
		    <p>
			    Par <a href="index9900.html?q=user/868" title="Voir le profil utilisateur.">zeoc</a> le 11/07/2005 - 15:34
		    </p>	
			    <p>Bonjour,<br />
j'effectue actuellement des tests de performance de PostgreSQL 8.0.3 (sous W2K Server SP4)<br />
Je compare les performances sur un cas SQL tr√®s simple :</p>
<p>SELECT colonne FROM table GROUP BY colonne</p>
<p>la "table" contient 3200000 lignes et "colonne" contient 88 valeurs distinctes<br />
SQLServer2000 execute cette requ√™te en 8 secondes et Postgres en 30 secondes...</p>
<p>J'ai essay√© de modifier les param√®tres (shared_max_buffer et work_mem en particulier) sans succ√®s.</p>
<p>Est-il "normal" que Postgres soit si "mauvais" ? Des id√©es d'optimisation ?<br />
Merci.</p>
<!--hr /--><div class="contentsLink">[ <a href="indexf912.html?q=node/409" title="Performance avec index">sujet pr√©c√©dent</a> | <a href="indexc5de.html?q=node/1041" title="je debute avec postgresql">sujet suivant</a> ]</div>
		     </div></div>
<!--</div>
</div>
</div>
</div> -->
<a id="comment"></a>
<form method="post" action="http://drupal.postgresql.fr/?q=comment"><div>
<div class="pgSideNav">    <h2>Options d'affichage des commentaires</h2>    
		    <div>
			<div class="form-item">
 <select name="mode"> <option value="1">A plat - repli√©</option>
 <option value="2">A plat - d√©pli√©</option>
 <option value="3">Par discussions - repli√©</option>
 <option value="4" selected="selected">Par discussions - d√©pli√©</option>
</select>
<select name="order"> <option value="1">Date - r√©cents en premier</option>
 <option value="2" selected="selected">Date - anciens en premier</option>
</select>
<select name="comments_per_page"> <option value="10">10 commentaires par page</option> <option value="30">30 commentaires par page</option> <option value="50" selected="selected">50 commentaires par page</option> <option value="70">70 commentaires par page</option> <option value="90">90 commentaires par page</option></select>
<input type="hidden" name="threshold" value="0" />
 <input type="submit" class="form-submit" name="op" value="Sauvegarder les param√®tres"  />

 <div class="description">S√©lectionnez la m√©thode d'affichage des commentaires que vous pr√©f√©rez, puis cliquez sur "Sauvegarder les param√®tres" pour activer vos changements.</div>
</div>

		    </div></div><input type="hidden" name="edit[nid]" value="288" />
</div></form><form method="post" action="http://drupal.postgresql.fr/?q=comment"><div>
<input type="hidden" name="edit[nid]" value="288" />
<a id="comment-245"></a>
<div class="pgContentWrap"><h1 id="txtFrontFeatureHeading">le vacuum analyze a t'il √©t</h1>
		<p>
		    <b><a href="indexeace-2.html?q=user/757" title="Voir le profil utilisateur.">jmreymond</a></b>/ = 11 Juillet, 2005 - 22:45
		</p>
		<p>
		    <p>le vacuum analyze a t'il √©t√© fait ?</p>
<p>Jean-Max Reymond<br />
CKR Solutions Open Source<br />
Nice France<br />
http://www.ckr-solutions.com</p>
<br /><!--hr /--><div class="contentsLink">[ Vous devez <a href="index7992.html?q=user/login">vous connecter</a> pour poster des commentaires ]</div>
		</p></div><div style="margin-left:25px;">
<a id="comment-250"></a>
<div class="pgContentWrap"><h1 id="txtFrontFeatureHeading">oui.</h1>
		<p>
		    <b><a href="index9900.html?q=user/868" title="Voir le profil utilisateur.">zeoc</a></b>/ = 12 Juillet, 2005 - 16:33
		</p>
		<p>
		    <p>oui.</p>
<br /><!--hr /--><div class="contentsLink">[ Vous devez <a href="index7992.html?q=user/login">vous connecter</a> pour poster des commentaires ]</div>
		</p></div></div>
<div style="margin-left:25px;">
<a id="comment-251"></a>
<div class="pgContentWrap"><h1 id="txtFrontFeatureHeading">Bonjour

dire que PostgreSQ</h1>
		<p>
		    <b><a href="index0b33.html?q=user/22" title="Voir le profil utilisateur.">Christophe Chauvet</a></b>/ = 12 Juillet, 2005 - 16:34
		</p>
		<p>
		    <p>Bonjour</p>
<p>dire que PostgreSQL est mauvais est un peu fort, effectivement apr√®s l'insertion des donn√©es le VACUUM ANALYSE a t'il √©t√© fait ?<br />
ensuite l'√©quivalence des types entre PostgreSQL et SQLServer a t'elle √©t√© judiscieuse pour PostgreSQL ?<br />
pour comparer les performances de ces 2 SGBD il faut les tester dans leur environnement natif √† savoir Windows pour SQLServer et FreeBSD (ou Linux) pour PostgreSQL.</p>
<p>Ensuite quel outils a servi √† mesurer ces temps ? (pour chacun des 2).</p>
<p>Apr√®s √©ventuellement on pourra s'attaquer √† l'optimisation de postgreSQL.</p>
<p>Christophe.</p>
<br /><!--hr /--><div class="contentsLink">[ Vous devez <a href="index7992.html?q=user/login">vous connecter</a> pour poster des commentaires ]</div>
		</p></div></div>
<div style="margin-left:50px;">
<a id="comment-252"></a>
<div class="pgContentWrap"><h1 id="txtFrontFeatureHeading">le vacuum a √©t√© fait comme </h1>
		<p>
		    <b><a href="index9900.html?q=user/868" title="Voir le profil utilisateur.">zeoc</a></b>/ = 12 Juillet, 2005 - 16:51
		</p>
		<p>
		    <p>le vacuum a √©t√© fait comme je l'ai pr√©cis√© dans un mail pr√©c√©dent...<br />
sur l'√©quivalence de types si je connaissais les choses judicieuses √† faire je les ferais (c'est aussi pour √ßa que je viens dans ce forum)</p>
<p>Par ailleurs me dire de comparer PostgreSQL /Linux avec SQLS/Windows c'est bien gentil mais moi ma plateforme cible c'est pas Linux mais Windows, alors si PostgreSQL n'est bon que sous son environnement natif faut le dire ca m'√©vitera de perdre du temps...<br />
Quant √† savoir si les outils de mesure sont les bons je me poserai la question quand les √©crats seront r√©duit et pas √† un facteur 4!!!</p>
<p>Donc bon j'ai failli m'√©nerv√© mais non...;)</p>
<p>PS: au fait j'avais mis des guillemets √† "mauvais"...</p>
<br /><!--hr /--><div class="contentsLink">[ Vous devez <a href="index7992.html?q=user/login">vous connecter</a> pour poster des commentaires ]</div>
		</p></div></div>
<div style="margin-left:50px;">
<a id="comment-253"></a>
<div class="pgContentWrap"><h1 id="txtFrontFeatureHeading">Ce que je voulais dire c'est </h1>
		<p>
		    <b><a href="index0b33.html?q=user/22" title="Voir le profil utilisateur.">Christophe Chauvet</a></b>/ = 12 Juillet, 2005 - 17:08
		</p>
		<p>
		    <p>Ce que je voulais dire c'est que PG sera beaucoup plus performant sur une plateforme de type Unix, la version windows fonctionne mais pour ma part je m'en servirais seulement pour d√©velopper, pas pour un serveur de prod. </p>
<p>chose suivant, il serait bien de nous pr√©ciser l'outils utilis√© pour cette mesure sous PG, et si la requ√™te √©tait lanc√© sous psql voir PGAdmin3 cela nous donnerais beaucoup plus de valeur, pourrait t'on √©galement avoir le r√©sultat de l'explain plan sur cette requ√™te afin de v√©rifier la bonne utilisation des index.</p>
<p>Christophe.</p>
<p>P.S. Je ne fais que poser des questions, ne pas y voir un contenu offensent.</p>
<br /><!--hr /--><div class="contentsLink">[ Vous devez <a href="index7992.html?q=user/login">vous connecter</a> pour poster des commentaires ]</div>
		</p></div></div>
<div style="margin-left:50px;">
<a id="comment-257"></a>
<div class="pgContentWrap"><h1 id="txtFrontFeatureHeading">
les temps PG sont pris sur </h1>
		<p>
		    <b><a href="index9900.html?q=user/868" title="Voir le profil utilisateur.">zeoc</a></b>/ = 12 Juillet, 2005 - 18:11
		</p>
		<p>
		    <p>les temps PG sont pris sur PGAdmin3 (ceux de SQLServer sur l'analyze de Entreprise Manager).</p>
<p>Tout d'abord la requete :</p>
<p>select champ from table_test group by champ</p>
<p>"champ" √©tait √† l'origine un varchar(4) puis j'ai recr√©√© le jeu de test avec un char(4) ce qui n'a pas chang√© grand chose.<br />
Que je cr√©√© ou pas des index (sauf si je m'y prends mal) ne change rien au temps NI √† l'explain qui est toujours de la forme :</p>
<p>HashAggregate  (cost=64409.09..64409.09 rows=63 width=8)<br />
  ->  Seq Scan on table_test  (cost=0.00..56324.27 rows=3233927 width=8)</p>
<p>voil√†.</p>
<p>PS: d√©sol√© si j'avais mal interpr√©t√© la 1ere r√©ponse et merci de s'interesser √† mon pb...;)</p>
<br /><!--hr /--><div class="contentsLink">[ Vous devez <a href="index7992.html?q=user/login">vous connecter</a> pour poster des commentaires ]</div>
		</p></div></div>
<div style="margin-left:75px;">
<a id="comment-260"></a>
<div class="pgContentWrap"><h1 id="txtFrontFeatureHeading">Info suppl√©mentaire :

en </h1>
		<p>
		    <b><a href="index9900.html?q=user/868" title="Voir le profil utilisateur.">zeoc</a></b>/ = 13 Juillet, 2005 - 10:18
		</p>
		<p>
		    <p>Info suppl√©mentaire :</p>
<p>en re-cr√©ant la base  en LATIN1 au lieu d'UNICODE j'ai gagn√© 30%...<br />
Question subsidiaire :<br />
PG est-il sens√© utilis√© les index sur un group by simple, si oui quelle sorte d'index ?<br />
merci.</p>
<br /><!--hr /--><div class="contentsLink">[ Vous devez <a href="index7992.html?q=user/login">vous connecter</a> pour poster des commentaires ]</div>
		</p></div></div>
<div style="margin-left:100px;">
<a id="comment-271"></a>
<div class="pgContentWrap"><h1 id="txtFrontFeatureHeading">Group by et index</h1>
		<p>
		    <b><a href="indexec55.html?q=user/2" title="Voir le profil utilisateur.">Jean-Paul Argudo</a></b>/ = 16 Juillet, 2005 - 19:00
		</p>
		<p>
		    <p>Bonjour,<br />
Ci-apr√®s les r√©sultats d'un test rapide que j'ai fait (sur mon portable, √ßa a un peu chauff√© hihihi): Config: debian gnu/linux, pg 8.0.3:<br />
<code></p>
<pre>
test=# \d ma_table<br />
              Table "public.ma_table"<br />
     Column     |            Type             | Modifiers<br />
----------------+-----------------------------+-----------<br />
 mata_cod_prod  | numeric(3,0)                | not null<br />
 mata_dat_eff   | timestamp without time zone | not null<br />
 mata_no_adhes  | numeric(10,0)               | not null<br />
 mata_cod_supp  | character(6)                | not null<br />
 mata_nom       | character(20)               |<br />
 mata_flg_actif | character(1)                |<br />
 mata_parts     | numeric(18,5)               |<br />
 mata_valuc     | numeric(18,5)               |<br />
 mata_ea        | numeric(15,2)               |<br />
Indexes:<br />
    "ma_table_pkey" PRIMARY KEY, btree (mata_cod_prod, mata_no_adhes,<br />
mata_cod_supp, mata_dat_eff) CLUSTER<br />
    "idx_mata_flg_actif" btree (mata_flg_actif)</p>
<p>test=# select count(*) from ma_table;<br />
  count<br />
  ---------<br />
   1592714<br />
   (1 row)</p>
<p>test=# explain select mata_cod_prod from ma_table group by mata_cod_prod;<br />
                                      QUERY PLAN<br />
--------------------------------------------------------------------------------------<br />
 Group  (cost=293299.90..301238.76 rows=12 width=10)<br />
   ->  Sort  (cost=293299.90..297269.33 rows=1587772 width=10)<br />
         Sort Key: mata_cod_prod<br />
         ->  Seq Scan on ma_table  (cost=0.00..55240.72 rows=1587772 width=10)<br />
(4 rows)</p>
<p>test=# create INDEX idx_mata_cod_prod on ma_table(mata_cod_prod);<br />
CREATE INDEX<br />
test=# VACUUM ANALYZE ma_table;<br />
VACUUM<br />
test=# explain select mata_cod_prod from ma_table group by mata_cod_prod;<br />
                                               QUERY PLAN<br />
--------------------------------------------------------------------------------------------------------<br />
 Group  (cost=0.00..66112.64 rows=12 width=10)<br />
   ->  Index Scan using idx_mata_cod_prod on ma_table (cost=0.00..62130.85 rows=1592714 width=10)<br />
(2 rows)
</pre>
<p></code>
</p>
<p>
On remarque que l'ajout de l'index a am√©lior√© de mani√®re tr√®s significative le co√ªt de la requ√™te... parceque l'optimiseur de PG utilise l'index, comme on pouvait s'y attendre.
</p>
<p>
Si vous n'avez pas le m√™me comportement, m√™me si votre PG est sous Windows, c'est que vous avez loup√© une √©tape, ou alors qu'il y a un gros loup quelque part... Tenez-nous au courant.</p>
<p>Cordialement,</p>
<p>--<br />
Jean-Paul ARGUDO<br />
www.PostgreSQLFr.org
</p>
<br /><!--hr /--><div class="contentsLink">[ Vous devez <a href="index7992.html?q=user/login">vous connecter</a> pour poster des commentaires ]</div>
		</p></div></div>
<div style="margin-left:75px;">
<a id="comment-270"></a>
<div class="pgContentWrap"><h1 id="txtFrontFeatureHeading">Quelques √©l√©ments de r√©ponse</h1>
		<p>
		    <b><a href="indexec55.html?q=user/2" title="Voir le profil utilisateur.">Jean-Paul Argudo</a></b>/ = 16 Juillet, 2005 - 18:40
		</p>
		<p>
		    <p>Bonjour,<br />
Tout d'abord, je pense que le meilleur endroit pour que vous puissiez trouver des r√©ponses pr√©cises sur le sujet des performances est la liste postgresql-performance. Vous pourrez vous y abonner et poster (gratuit bien s√ªr), en visitant ce site:<br></p>
<p><a href="http://www.postgresql.org/community/lists/subscribe" target="_blank">http://www.postgresql.org/community/lists/subscribe</a></p>
<p>...dans "Available Lists" s√©lectionnez 'performance'.</p>
<p>Ensuite, vous pourrez poster <b>en anglais et avec pr√©cision</b> votre probl√®me. Je pense qu'il sera de nature √† int√©resser Tom Lane...</p>
<p>Sachez que lorsque vous cr√©ez un index, vous <b>devez</b> faire un vacuum analyze sur la table (vacuum analyze ma_table), sinon l'index n'est pas pris en compte.</p>
<p>Vous dites que lorsque vous ajoutez un index cela ne change rien aux temps de r√©ponse ni √† l'explain. Cela veut dire que l'optimiseur pense que sa m√©thode est toujours la meilleure; Soit il n'a pas la connaissance de(s) l'index, soit il y a des param√®tres dans votre configuration qui influent de mani√®re significative sur son "comportement"... C'est pourquoi j'aimerais que vous puissiez nous mettre √† disposition, pour √©tude:
<ul>
<li>une fiche descriptive de votre environnement de test (logiciels, mat√©riel, etc)
<li>votre postgresql.conf
<li>un dump de votre base de test
<li>le source de la (des) requete(s) utilis√©e(s) pour les tests
</ul>
<p>J'esp√®re que vous comprenez bien que sans cela, nous ne pourrons pas aller tr√®s loin pour vous aider :-/... </p>
<P>Cordialement,<br><br />
--<br />
Jean-Paul ARGUDO<br />
www.PostgreSQLFr.org
</p>
<br /><!--hr /--><div class="contentsLink">[ Vous devez <a href="index7992.html?q=user/login">vous connecter</a> pour poster des commentaires ]</div>
		</p></div></div>
<div style="margin-left:75px;">
<a id="comment-327"></a>
<div class="pgContentWrap"><h1 id="txtFrontFeatureHeading">Merci...J'√©tais en cong√©s..</h1>
		<p>
		    <b><a href="index9900.html?q=user/868" title="Voir le profil utilisateur.">zeoc</a></b>/ = 10 Ao√ªt, 2005 - 10:44
		</p>
		<p>
		    <p>Merci...J'√©tais en cong√©s...<br />
Je reprends tout √ßa d√®s que possible...</p>
<br /><!--hr /--><div class="contentsLink">[ Vous devez <a href="index7992.html?q=user/login">vous connecter</a> pour poster des commentaires ]</div>
		</p></div></div>
<div style="margin-left:75px;">
<a id="comment-328"></a>
<div class="pgContentWrap"><h1 id="txtFrontFeatureHeading">J"'ai enfin r√©ussi √† faire </h1>
		<p>
		    <b><a href="index9900.html?q=user/868" title="Voir le profil utilisateur.">zeoc</a></b>/ = 11 Ao√ªt, 2005 - 11:18
		</p>
		<p>
		    <p>J"'ai enfin r√©ussi √† faire en sorte que PG utilise l'index.<br />
enable_hashagg = false<br />
dans la config.<br />
MAIS les temps de r√©ponse sont similaires.</p>
<br /><!--hr /--><div class="contentsLink">[ Vous devez <a href="index7992.html?q=user/login">vous connecter</a> pour poster des commentaires ]</div>
		</p></div></div>
<div style="margin-left:100px;">
<a id="comment-330"></a>
<div class="pgContentWrap"><h1 id="txtFrontFeatureHeading">Bonjour,
Via ce for√ßage vou</h1>
		<p>
		    <b><a href="indexec55.html?q=user/2" title="Voir le profil utilisateur.">Jean-Paul Argudo</a></b>/ = 11 Ao√ªt, 2005 - 13:44
		</p>
		<p>
		    <p>Bonjour,<br />
Via ce for√ßage vous vous exposez √† de grosses difficult√©s... En effet, le param√©trage "enable_hashagg = false" vaut pour toutes les bases PostgreSQL install√©es. Ce genre de param√©trage n'existe que pour faire des tests, ne l'oubliez jamais&nbsp;!
</p>
<p>
Parce qu'interdire ainsi √† l'optimiseur d'utiliser telle ou telle m√©thode est absolument dangereux. Vous pourrez probablement avec cette astuce am√©liorer les temps d'UNE requ√™te, mais cela sera au d√©triment des autres&nbsp;! Dans votre exemple, que les temps de r√©ponse soient similaires ne m'√©tonne pas du tout, cela prouve que l'optimiseur avait bien choisi le meilleur chemin. Il ne faut pas croire qu'un index am√©liore syst√©matiquement tout comme par magie...</p>
<p>
Bien des fois PG, pr√©f√©rera un full table scan que de passer par un index, parceque c'est tout simplement moins le chemin optimal dans bien des cas... Dans votre exemple, je pense que votre index doit avoir une s√©lectivit√© peu int√©ressante, ou alors que votre table n'a pas un nombre de tuples significatif, ce qui peut expliquer que PG le boude. Mais avec l'activit√© de la base, et des vacuum analyze, il se peut qu'√† un moment PG d√©cide d'utiliser votre index, parceque tout simplement, ce sera alors le meilleur choix.
</p>
<p>Conclusion: en tant que DBA, vous posez les index l√† o√π cela vous semble judicieux, et laissez ensuite PG d√©cider tout seul s'il doit les utiliser ou pas: Faites-lui donc confiance, il fait toujours pour le mieux&nbsp;!</p>
<p>--<br />
Jean-Paul ARGUDO<br />
www.PostgreSQLFr.org
</p>
<br /><!--hr /--><div class="contentsLink">[ Vous devez <a href="index7992.html?q=user/login">vous connecter</a> pour poster des commentaires ]</div>
		</p></div></div>
<div style="margin-left:100px;">
<a id="comment-331"></a>
<div class="pgContentWrap"><h1 id="txtFrontFeatureHeading">Je suis d'accord avec vos rem</h1>
		<p>
		    <b><a href="index9900.html?q=user/868" title="Voir le profil utilisateur.">zeoc</a></b>/ = 11 Ao√ªt, 2005 - 14:43
		</p>
		<p>
		    <p>Je suis d'accord avec vos remarques...</p>
<p>Mais PG reste donc beaucoup plus mauvais que SQLServer (dans ce cas pr√©cis).<br />
Ce n'est pas une critique juste une constatation et je suis convaincu que je peux trouver plein d'autres cas ou PG est bien meilleur que SQLServer ;-)</p>
<p>Je vais essayer un PG sous Linux pour voir...</p>
<p>Merci √† tous.</p>
<br /><!--hr /--><div class="contentsLink">[ Vous devez <a href="index7992.html?q=user/login">vous connecter</a> pour poster des commentaires ]</div>
		</p></div></div>
<div style="margin-left:100px;">
<a id="comment-444"></a>
<div class="pgContentWrap"><h1 id="txtFrontFeatureHeading">Bonjour √† tous,

J'ai lu a</h1>
		<p>
		    <b><a href="indexbfe3-2.html?q=user/1082" title="Voir le profil utilisateur.">thom</a></b>/ = 7 Octobre, 2005 - 11:58
		</p>
		<p>
		    <p>Bonjour √† tous,</p>
<p>J'ai lu attentivement tous vos posts, ce qui m'a incit√© √† faire des tests sur ma base PostgreSQL 8.0.3 install√©e sur XP,</p>
<p>Sur cette base les √©l√©ments suivants :<br />
CREATE TABLE mvstoc (<br />
    tmvt text,<br />
    nart text,<br />
    qtmv numeric(15,3),<br />
    ktmv numeric(15,3),<br />
    dtmv integer<br />
);</p>
<p>CREATE INDEX idx_dtmv ON mvstoc USING btree (dtmv);<br />
CREATE INDEX idx_nart ON mvstoc USING btree (nart);<br />
CREATE INDEX idx_tmvt ON mvstoc USING btree (tmvt);</p>
<p>MVSTOC contient 1114091 lignes avec 2834 occurence de "nart"</p>
<p>Et voici l'"analyze" sur la requete:<br />
 "select nart from mvstoc group by nart order by nart"</p>
<p>----></p>
<p>Sort  (cost=26495.62..26498.11 rows=994 width=15) (actual time=4297.000..4297.000 rows=2834 loops=1)<br />
  Sort Key: nart<br />
  ->  HashAggregate  (cost=26446.14..26446.14 rows=994 width=15) (actual time=4281.000..4281.000 rows=2834 loops=1)<br />
        ->  Seq Scan on mvstoc  (cost=0.00..23660.91 rows=1114091 width=15) (actual time=0.000..2311.000 rows=1114091 loops=1)<br />
Total runtime: 4297.000 ms</p>
<p>M√™me apr√®s un vacuum analyze MVSTOC</p>
<p>Pourquoi PG utilise-t-il le Seq Scan au lieu de l'index ?</p>
<br /><!--hr /--><div class="contentsLink">[ Vous devez <a href="index7992.html?q=user/login">vous connecter</a> pour poster des commentaires ]</div>
		</p></div></div>
<div style="margin-left:100px;">
<a id="comment-447"></a>
<div class="pgContentWrap"><h1 id="txtFrontFeatureHeading">Bonjour Thom

Dans ta requ</h1>
		<p>
		    <b><a href="index0b33.html?q=user/22" title="Voir le profil utilisateur.">Christophe Chauvet</a></b>/ = 8 Octobre, 2005 - 14:44
		</p>
		<p>
		    <p>Bonjour Thom</p>
<p>Dans ta requ√™te <b>select nart from mvstoc group by nart order by nart</b>, Pg doit de toute de toute fa√ßon parcourir tous les enregistrements, donc je vois pas pourquoi il s'emb√®terait √† utiliser un quelconque index, de plus le <b>GROUP BY</b> est inutile ici, je ne vois pas d'utilisation d'aggr√©gat.</p>
<p>quand je vois cette phrase:<br />
<i>MVSTOC contient 1114091 lignes avec 2834 occurence de "nart"</i></p>
<p>je verrais plut√¥t une requ√™te de ce genre:<br />
<i>SELECT nart FROM mvstoc WHERE nart LIKE '%nart%' </i></p>
<p>et l√† l'index sur nart va √™tre utilis√©.</p>
<p>pour infos, Oracle aurait r√©agit de la m√™me fa√ßon que PG a ce type de requ√™te.</p>
<p>Cordialement.</p>
<p>Christophe Chauvet.</p>
<br /><!--hr /--><div class="contentsLink">[ Vous devez <a href="index7992.html?q=user/login">vous connecter</a> pour poster des commentaires ]</div>
		</p></div></div>
</div></form>
<!-- end content -->
              </td>

    </tr>
    <tr><td colspan="2">

		<div class="pgTopNav">
		   <div class="pgTopNavLeft"> 
		     <img src="layout/images/nav_lft.png" width="7" height="23" alt="" />
		   </div>
		   <div class="pgTopNavRight">
		    <img src="layout/images/nav_rgt.png" width="7" height="23" alt="" />
		  </div>
		  <!--<ul class="pgTopNavList">-->
		  <ul class="pgTopNavList">
		   <li><a href="index03d2.html?q=" title="Retourner √† la page principale.">accueil</a> </li>
		   <li> <a href="indexf6e5.html?q=archive" title="Lire le contenu plus ancien dans notre archive.">archives</a> </li>
		   <li> <a href="index71c4.html?q=blog" title="Lire les blogues les plus r√©cents.">blogues</a> </li>

		   <li> <a href="indexf6fe.html?q=book" title="Lire et contribuer aux livres collaboratifs.">livres</a> </li>
		   <li> <a href="index79b7.html?q=forum">forums</a> </li>
		   <li> <a href="index729f.html?q=poll" title="Voir la liste des sondages de ce site.">sondages</a> </li>
		   <li> <a href="index4404.html?q=search" title="Chercher pour du contenu plus vieux.">recherche</a></li><li><a href="http://docs.postgresqlfr.org/" target="_blank">documentation </a></li>

		  </ul>

<!--
		   <li><a href="?q=" title="Retourner √† la page principale.">accueil</a> </li>
		   <li> <a href="?q=archive" title="Lire le contenu plus ancien dans notre archive.">archives</a> </li>
		   <li> <a href="?q=blog" title="Lire les blogues les plus r√©cents.">blogues</a> </li>
		   <li> <a href="?q=book" title="Lire et contribuer aux livres collaboratifs.">livres</a> </li>
		   <li> <a href="?q=forum">forums</a> </li>
		   <li> <a href="?q=poll" title="Voir la liste des sondages de ce site.">sondages</a> </li>
		   <li> <a href="?q=search" title="Chercher pour du contenu plus vieux.">recherche</a></li><li><a href="http://docs.postgresqlfr.org/" target="_blank">documentation </a></li>
-->
		  </ul>
	        </div>
    </td></tr>
   </table>
   <p style="text-align: center;">&copy;&nbsp;PostgreSQLFr, tous droits r√©serv√©s.<br>
Site d√©clar√© √† la CNIL sous le num√©ro 1074678, conform√©ment √† la Loi en vigueur.
</p>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-3921927-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
<p></p>
   
</body>

<!-- Mirrored from drupal.postgresql.fr/?q=node/288 by HTTrack Website Copier/3.x [XR&CO'2006], Sun, 12 Oct 2008 17:09:01 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>