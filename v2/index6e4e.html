
<!DOCTYPE
 html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
 <html>
 <!-- $Date: 2005/08/30 07:54:43 $ / $Revision: 1.29 $ / Last Theme Editor :$Author: jx $-->
  
<!-- Mirrored from drupal.postgresql.fr/?q=node/1432 by HTTrack Website Copier/3.x [XR&CO'2006], Sun, 12 Oct 2008 15:59:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<base  />
<style type="text/css" media="all">@import "misc/drupal.css";</style>
   <title>Pourquoi pr√©f√©rer PostgreSQL √† MySQL - PostgreSQLFr</title>
 <style type="text/css" media="screen" title="Normal Text">
    @import url("layout/css/blue/fixed.css");
    @import url(_guillaume/dotclear/themes/postgresql/style.html);
 </style>
 <style type="text/css" media="screen" title="Normal Text2">
    @import url("layout/css/blue/pgfr.css");
    @import url(_guillaume/dotclear/themes/postgresql/style.html);
 </style>
   </head>
   <body>
    <table border="0" cellspacing="5" cellpadding="0" width="100%">
     <tr>
      <!--td colspan="2" width="100%"-->
      <td colspan="2">
      <!-- Head -->
       <table border="0" cellspacing="0" cellpadding="0" width="100%">
        <tr>
	 <td align="left">
           <div id="pgHeader">
	    <div id="pgHeaderLogoLeft">
	     <a href="index.html" title="PostgreSQL"><img src="layout/images/hdr_left.png" width="230" height="80" alt="PostgreSQL" /></a>
	    </div>
	    <div id="pgHeaderLogoRight">
	     <a href="index.html" title="La base de donnÈes la plus sophistiquÈe au monde."><img src="layout/images/hdr_right.png" width="210" height="80" alt="La base de donnÈes la plus sophistiquÈe au monde." /></a>
	    </div>
	   </div>
         </td>
	 <td align="right">
         </td>
	</tr>
      </table> <!-- Head -->
      <br />
      <table border="0" cellspacing="0" cellpadding="0" width="100%">
              <tr>
	      	 <td align="left">

		<div class="pgTopNav">
		   <div class="pgTopNavLeft"> 
		     <img src="layout/images/nav_lft.png" width="7" height="23" alt="" />
		   </div>
		   <div class="pgTopNavRight">
		    <img src="layout/images/nav_rgt.png" width="7" height="23" alt="" />
		  </div>
		  <!--<ul class="pgTopNavList">-->
		  <ul class="pgTopNavList">
		   <li><a href="index03d2.html?q=" title="Retourner √† la page principale.">accueil</a> </li>
		   <li> <a href="indexf6e5.html?q=archive" title="Lire le contenu plus ancien dans notre archive.">archives</a> </li>
		   <li> <a href="index71c4.html?q=blog" title="Lire les blogues les plus r√©cents.">blogues</a> </li>

		   <li> <a href="indexf6fe.html?q=book" title="Lire et contribuer aux livres collaboratifs.">livres</a> </li>
		   <li> <a href="index79b7.html?q=forum">forums</a> </li>
		   <li> <a href="index729f.html?q=poll" title="Voir la liste des sondages de ce site.">sondages</a> </li>
		   <li> <a href="index4404.html?q=search" title="Chercher pour du contenu plus vieux.">recherche</a></li><li><a href="http://docs.postgresqlfr.org/" target="_blank">documentation </a></li>

		  </ul>

<!--
		   <li><a href="?q=" title="Retourner √† la page principale.">accueil</a> </li>
		   <li> <a href="?q=archive" title="Lire le contenu plus ancien dans notre archive.">archives</a> </li>
		   <li> <a href="?q=blog" title="Lire les blogues les plus r√©cents.">blogues</a> </li>
		   <li> <a href="?q=book" title="Lire et contribuer aux livres collaboratifs.">livres</a> </li>
		   <li> <a href="?q=forum">forums</a> </li>
		   <li> <a href="?q=poll" title="Voir la liste des sondages de ce site.">sondages</a> </li>
		   <li> <a href="?q=search" title="Chercher pour du contenu plus vieux.">recherche</a></li><li><a href="http://docs.postgresqlfr.org/" target="_blank">documentation </a></li>
-->
		  </ul>
	        </div>
		</td>
		</tr>
		</table>
      </td>
     </tr>
     <tr>
    <td style="vertical-align: top; width: 20%;">
<div class="block block-user" id="block-user-0">
<div class="pgSideNav">    <h2>Ouverture de session</h2>    
		    <div>
			<form action="http://drupal.postgresql.fr/?q=user/login" method="post">
<div class="user-login-block">
<input type="hidden" name="edit[destination]" value="node/1432" />
<div class="form-item">
 <label for="edit-name">Nom d'utilisateur:</label><br />
 <input type="text" maxlength="64" class="form-text" name="edit[name]" id="edit-name" size="15" value="" />
</div>
<div class="form-item">
 <label for="edit-pass">Mot de passe:</label><br />
 <input type="password" class="form-password" maxlength="64" name="edit[pass]" id="edit-pass" size="15" value="" />
</div>
<input type="submit" class="form-submit" name="op" value="Identification"  />
</div>

</form>
<div class="item-list"><ul><li><a href="indexc12c.html?q=user/password" title="Demander un nouveau mot de passe par e-mail.">Demander un nouveau mot de passe</a></li></ul></div>
		    </div></div></div>
<div class="block block-user" id="block-user-1">
<div class="pgSideNav">    <h2>Navigation</h2>    
		    <div>
			<div class="menu">
<ul>
<li class="leaf"><a href="indexa499.html?q=tracker">messages r√©cents</a></li>

</ul>
</div>
		    </div></div></div>
<div class="block block-block" id="block-block-4">
<div class="pgSideNav">    <h2>Contactez-nous</h2>    
		    <div>
			<p><strong>Administration du site&nbsp;:</strong><br />
"equipe chez postgresqlfr point org"<br><br />
<strong>Contact presse&nbsp;:</strong><br />
"fr chez postgresql point org"<br><br />
<strong>Contact association&nbsp;:</strong><br />
"bureau chez postgresqlfr point org"<br><br />
<strong>Questions PostgreSQL&nbsp;:</strong><br />
&nbsp;IRC&nbsp;:<br />
&nbsp;&nbsp;serveur <strong>irc.freenode.net</strong><br />
&nbsp;&nbsp;canal <strong>#postgresqlfr</strong></p>

		    </div></div></div>
<div class="block block-block" id="block-block-1">
<div class="pgSideNav">    <h2>Liens</h2>    
		    <div>
			<p><small></p>
<ul>
<li>
<a href="http://www.postgresqlfr.org/?q=node/view/162">Adh√©rer</a>
</li>
<li>
<a href="http://www.postgresqlfr.org/?q=node/473">Faire un don</a>
</li>
<li>
<a href="http://www.postgresqlfr.org/?q=node/163">Consulter les statuts</a>
</li>
</ul>
<ul>
<li>
<a href="http://www.postgresql.org/" class="active">Site original<br />
</a>
</li>
<li>
<a href="http://docs.postgresqlfr.org/" class="active">Site de traduction</a>
</li>
<li>
<a href="http://docs.postgresqlfr.org/8.3/">Doc v.8.3.x fr</a>
</li>
<li>
<a href="http://docs.postgresqlfr.org/8.2/">Doc v.8.2.x fr</a>
</li>
<li>
<a href="http://docs.postgresqlfr.org/8.1/">Doc v.8.1.x fr</a>
</li>
<li>
<a href="http://docs.postgresqlfr.org/8.0/">Doc v.8.0.x fr</a>
</li>
<li>
<a href="http://docs.postgresqlfr.org/7.4/">Doc v.7.4.x fr</a>
</li>
<li>
<a href="http://www.postgis.fr/">PostGIS</a>
</li>
<li>
<a href="http://www.postgresql.org/docs/techdocs">Techdocs</a>
</li>
<li>
<a href="http://www.varlena.com/varlena/GeneralBits/Tidbits/">General TidBits</a>
</li>
<p><!--</p>
<li>
<a href="http://www.postgresqlfr.org/?q=node/view/58">Version Windows</a>
</li>
<p>--></p>
<li>
<a href="http://www.postgresqlfr.org/drupal/?q=node/view/63">T√©moignages de pros</a>
</li>
<li>
<a href="http://archives.postgresql.org/pgsql-fr-generale/">Liste de diffusion</a>
</li>
<li>
<a href="http://wwwmaster.postgresql.org/download/mirrors-ftp">T√©l√©charger</a>
</li>
</ul>
<p></small></p>

		    </div></div></div>
<div class="block block-block" id="block-block-2">
<div class="pgSideNav">    <h2>Recherche</h2>    
		    <div>
			<form action="http://drupal.postgresql.fr/?q=search" method="post">
<div id="search">
<input class="form-text" type="text" size="15" value="" name="keys" alt="Enter the terms you wish to search for." /><br />
<input class="form-submit" type="submit" value="Recherche" />
</div>
</form>

		    </div></div></div>
<div class="block block-forum" id="block-forum-0">
<div class="pgSideNav">    <h2>Sujets du forum</h2>    
		    <div>
			<div class="item-list"><h3>Sujets actifs</h3><ul><li><a href="index253f.html?q=node/1742">A LIRE : FERMETURE DES FORUMS DRUPAL</a></li><li><a href="indexfc2e.html?q=node/1739" title="2 commentaires">Probl√®me  avec pg_dump</a></li><li><a href="index97c1.html?q=node/1731" title="5 commentaires">Connexions simultann√©es</a></li><li><a href="index32d3.html?q=node/1737" title="1 commentaire">Optimisation de la m√©moire sous PostgreSQL</a></li><li><a href="index2483.html?q=node/1736" title="3 commentaires">[R√©solu] Upgrade Postgre -> types et op√©rateurs</a></li></ul></div><div class="item-list"><h3>Nouveaux sujets:</h3><ul><li><a href="index253f.html?q=node/1742">A LIRE : FERMETURE DES FORUMS DRUPAL</a></li><li><a href="indexfc2e.html?q=node/1739" title="2 commentaires">Probl√®me  avec pg_dump</a></li><li><a href="index32d3.html?q=node/1737" title="1 commentaire">Optimisation de la m√©moire sous PostgreSQL</a></li><li><a href="index2483.html?q=node/1736" title="3 commentaires">[R√©solu] Upgrade Postgre -> types et op√©rateurs</a></li><li><a href="index82c4.html?q=node/1734" title="2 commentaires">[RESOLU] Probleme de connection en odbc</a></li></ul></div><div class="more-link"><a href="index79b7.html?q=forum" title="Lire les derniers sujets.">en lire plus</a></div>
		    </div></div></div>
<div class="block block-archive" id="block-archive-0">
<div class="pgSideNav">    <h2>Acc√©der aux archives</h2>    
		    <div>
			
<!-- calendar -->
<div class="calendar"><table summary="Un calendrier pour acc√©der aux archives.">
 <caption><a href="index9dfb.html?q=archive/2008/09/12" title="Mois pr√©c√©dent">&laquo;</a> Octobre 2008 &nbsp;</caption>
 <tr class="header-week">
 <th abbr="Lundi">Lun</th>
 <th abbr="Mardi">Mar</th>
 <th abbr="Mercredi">Mer</th>
 <th abbr="Jeudi">Jeu</th>
 <th abbr="Vendredi">Ven</th>
 <th abbr="Samedi">Sam</th>
 <th abbr="Dimanche">Dim</th>
</tr>
 <tr class="row-week"><td class="day-blank" colspan="2">&nbsp;</td>
  <td class="day-link"><a href="indexd3e2.html?q=archive/2008/10/1">1</a></td>
  <td class="day-normal">2</td>
  <td class="day-normal">3</td>
  <td class="day-normal">4</td>
  <td class="day-normal">5</td>
 </tr>
 <tr class="row-week">
  <td class="day-normal">6</td>
  <td class="day-normal">7</td>
  <td class="day-normal">8</td>
  <td class="day-normal">9</td>
  <td class="day-normal">10</td>
  <td class="day-normal">11</td>
  <td class="day-today">12</td>
 </tr>
 <tr class="row-week">
  <td class="day-future">13</td>
  <td class="day-future">14</td>
  <td class="day-future">15</td>
  <td class="day-future">16</td>
  <td class="day-future">17</td>
  <td class="day-future">18</td>
  <td class="day-future">19</td>
 </tr>
 <tr class="row-week">
  <td class="day-future">20</td>
  <td class="day-future">21</td>
  <td class="day-future">22</td>
  <td class="day-future">23</td>
  <td class="day-future">24</td>
  <td class="day-future">25</td>
  <td class="day-future">26</td>
 </tr>
 <tr class="row-week">
  <td class="day-future">27</td>
  <td class="day-future">28</td>
  <td class="day-future">29</td>
  <td class="day-future">30</td>
  <td class="day-future">31</td>
  <td class="day-blank" colspan="2">&nbsp;</td>
 </tr>
</table></div>


		    </div></div></div>
<div class="block block-node" id="block-node-0">
<div class="pgSideNav">    <h2>Syndication</h2>    
		    <div>
			<div class="xml-icon"><a href="index9637.html?q=rss.xml"><img src="misc/xml.png" width="36" height="14" alt="Flux XML" title="Flux XML" /></a></div>
		    </div></div></div>
<div class="block block-poll" id="block-poll-0">
<div class="pgSideNav">    <h2>Sondage</h2>    
		    <div>
			<div class="poll"><div class="title">Quelle est la version de PostgreSQL la plus r√©pandue sur vos serveurs ?</div><div class="text">8.3</div><div class="bar"><div style="width: 10%;" class="foreground"></div></div><div class="percent">10%</div><div class="text">8.2</div><div class="bar"><div style="width: 42%;" class="foreground"></div></div><div class="percent">42%</div><div class="text">8.1</div><div class="bar"><div style="width: 40%;" class="foreground"></div></div><div class="percent">40%</div><div class="text">8.0</div><div class="bar"><div style="width: 2%;" class="foreground"></div></div><div class="percent">2%</div><div class="text">7.4</div><div class="bar"><div style="width: 6%;" class="foreground"></div></div><div class="percent">6%</div><div class="text">7.3 ou ant√©rieure</div><div class="bar"><div style="width: 0%;" class="foreground"></div></div><div class="percent">0%</div><div class="total">Nombre de votes: 48</div></div><div class="links"><a href="index8c57.html?q=node/1426#comment" title="Sauter au premier commentaire de ce message.">3 commentaires</a> | <a href="index729f.html?q=poll" title="Voir la liste des sondages de ce site.">anciens sondages</a></div>
		    </div></div></div>
    </td>

      <td style="vertical-align: top; width: 80%"><div class="breadcrumb"><a href="index03d2.html?q=">Accueil</a></div><h2 class="title">Pourquoi pr√©f√©rer PostgreSQL √† MySQL</h2>
<!-- begin content -->

<!-- node: "Pourquoi pr√©f√©rer PostgreSQL √† MySQL" -->
<!--<div class="pgFrontCenterUser">
<div class="pgFrontUser">
<div class="pgFrontUserInner">
--><div class="pgFrontUserWrap">
 <div class="pgFrontUserContent">	<h1 class="plop"><a href="index3513.html?q=taxonomy/term/22">Documentation</a> | <a href="index6e4e.html?q=node/1432" class="active">Pourquoi pr√©f√©rer PostgreSQL √† MySQL</a></h1>
		    <p>
			    Par <a href="index0b33.html?q=user/22" title="Voir le profil utilisateur.">Christophe Chauvet</a> le 24/10/2007 - 13:58
		    </p>	
			    <h1>Pourquoi pr√©f√©rer PostgreSQL √† MySQL&nbsp;: comparatif de fiabilit√© et de rapidit√© en 2007</h1>
<h2>Introduction</h2>
<p>
Pendant des ann√©es, le march√© consid√©rait MySQL comme plus rapide et plus facile √† utiliser que PostgreSQL.<br />
PostgreSQL avait la r√©putation d'√™tre plus puissant, focalis√© sur l'int√©grit√© des donn√©es, et plus respectueux des normes SQL, mais √©galement plus lent et plus compliqu√© √† utiliser.
</p>
<p>
Ces perceptions appartiennent au pass√©, et avec les versions actuelles, les choses ne sont plus aussi tranch√©es qu'auparavant. Les deux syst√®mes ont √©volu√© avec des versions notables qui rendent leur comparaison beaucoup plus compliqu√©e.</p>
<ul>
<li>MySQL 5.0 (Octobre 2005) a finalement ajout√© un ¬´ strict mode ¬ª pour r√©duire l'√©cart en terme d'int√©grit√© des donn√©es et de conformit√© aux sp√©cifications. Le support des proc√©dures stock√©es, des vues, des d√©clencheurs et des curseurs, fonctionnalit√©s essentielles dans de nombreux cas de d√©ploiement de base de donn√©es, a aussi √©t√© ajout√©.</li>
<li>PostgreSQL 8.1 (Novembre 2005) am√©liore consid√©rablement les performances, particuli√®rement en terme d'√©volutivit√©. Une attention particuli√®re a √©t√© port√©e sur l'am√©lioration des performances pour toutes les versions 8.X, dont l'actuelle 8.2.</li>
</ul>
</p>
<p>
Alors que l'innovation sur ces deux SGBD a progress√©, chacune des communaut√©s de d√©veloppement a travaill√© activement √† r√©duire la liste de ses d√©savantages per√ßus. Le r√©sultat est qu'il est devenu plus difficile de d√©terminer objectivement la base de donn√©es la plus adapt√©e √† une application donn√©e.
</p>
<p>
Ce document vise √† pr√©senter les situations dans lesquelles PostgreSQL est plus appropri√© que MySQL, en essayant de comparer √©quitablement les versions de production actuelles et d'en discuter les forces et faiblesses. Les domaines principalement √©tudi√©s ici concernent les questions fondamentales de l'int√©grit√© des donn√©es et la rapidit√© du noyau logiciel de la base de donn√©es. Puisqu'il est souvent question de faire un choix entre performance et fiabilit√©, ces deux sujets doivent √™tre consid√©r√©s conjointement afin d'avoir une vision pr√©cise de l'ensemble.
</p>
<p>
En r√©sum√©, ce document apporte les √©l√©ments permettant d'affirmer que la g√©n√©ration actuelle de PostgreSQL r√©pond aussi bien, voire mieux, que MySQL lorsque les deux SGBD sont envisag√©s dans une application exigeant un haut degr√© d'int√©grit√© des donn√©es au sein d'une base de donn√©es transactionnelle, en particulier si l'on consid√®re un nombre important d'utilisateurs et des requ√™tes complexes. PostgreSQL conserve, de plus, son avance dans la conformit√© aux standards SQL et dans la richesse de ses fonctionnalit√©s.<br />
Ce document tente √©galement de mettre en avant l'approche fondamentale qui pr√©vaut depuis les origines de PostgreSQL, la priorit√© est d'obtenir un comprotement fiable et pr√©visible. √Ä l'inverse, le d√©veloppement de MySQL r√©sulte plus de rapi√®cements visant √† ajouter des fonctionnalit√©s (support des transactions et ¬´ strict mode ¬ª, par exemple) qui n'√©taient m√™me pas envisag√©es au d√©but.
</p>
<p><!-- SAS... --></p>
<h2>Comparaison des versions, ensemble de fonctionnalit√©s et d√©tails</h2>
<p>
Les versions actuelles recommand√©es en production en ce mois d'Ao√ªt 2007 sont <b>PostgreSQL 8.2</b> et <b>MySQL 5.0</b>, et feront donc ici l'objet de notre comparaison. PostgreSQL 8.1 et 8.2 sont aujourd'hui les deux versions support√©es avec de bonnes performances, certains des commentaires suivant pourront y faire r√©f√©rences indistinctement. 8.2 est sensiblement plus rapide (peut-√™tre pas moins de 30% sur certaines t√¢ches), mais d√©ployer 8.1 reste une option tout √† fait viable pour le moment, particuli√®rement d√ª au fait que les vendeurs de syst√®me d'exploitation la distribuent et la prennent en charge plus souvent que la 8.2 encore relativement r√©cente.
</p>
<p>
Les deux syst√®mes ont en ce moment des versions en phase de tests (PostgreSQL 8.3 et MySQL 5.1) qui offrent de nouvelles am√©liorations dans plusieurs domaines trait√©s ici, mais aucune des deux n'apporte de diff√©rences fondamentales si importantes qu'elles laisseraient penser que les principales orientations de ce document en seraient infirm√©es. La sortie officielle du moteur Falcon de MySQL est probablement l'un des futur points perturbateur √† l'horizon. La fonctionnalit√© de <a href="http://docs.postgresqlfr.org/8.3/wal-async-commit.html">Validation Asynchrone</a> (Asynchronous Commit) dans PostgreSQL 8.3 est un autre √©v√®nement prochain qui √©tendra significativement les diff√©rentes options disponibles pour affiner la configuration entre fiabilit√© et performance.
</p>
<p>
Ce qui ne sera pas sp√©cifiquement abord√© ici, seront les fonctionnalit√©s des deux produits dans des domaines ext√©rieurs √† ces fondamentaux. √Ä cause de l'importance des changements dans PostgreSQL 8.1 and MySQL 5.0, beaucoup des documents concernant ce sujet sont trop vieux pour √™tre recommand√©s. Incluant certaines pages qui auraient p√ª √™tre utiles :</p>
<ul>
<li><a href="http://www.devx.com/dbzone/Article/29480" target="_blank">Matrice de comparaison des fonctionnalit√©s des bases de donn√©es Open Source</a></li>
<li><a href="http://monstera.man.poznan.pl/wiki/index.php/Mysql_vs_postgres" target="_blank">MySQL contre PostgreSQL</a></li>
<li><a href="http://dev.mysql.com/doc/refman/5.1/en/roadmap.html" target="_blank">Pr√©vision de d√©veloppement de MySQL</a></li>
<li><a href="http://developer.postgresql.org/index.php/Feature_Matrix" target="_blank">Matrice des fonctionnalit√©s de PostgreSQL</a></li>
</ul>
</p>
<p>
Alors que les listes des fonctionnalit√©s sont utiles, certains comportements internes n√©cessitent une compr√©hension profonde des syst√®mes respectifs pour bien les saisir. Par exemple, les m√©canismes internes concernant la fa√ßon dont PostgreSQL compresse les donn√©es TOAST sont invisibles aux utilisateurs, mais peuvent mener √† une am√©lioration drastique des performances syst√®me sur certains types de donn√©e.
</p>
<p>
Un autre sujet qui sort du cadre de ce document est qu'un nombre plus important d'applications choisissent MySQL comme base de donn√©es plut√¥t que PostgreSQL, et ceci est certainement un facteur d'influence important sur le choix de la base la plus adapt√©e √† une situation particuli√®re. Le travail pour ajouter un support PostgreSQL √† plusieurs <a href="http://developer.postgresql.org/index.php/Category:Software_Ports">applications populaires</a> peut-√™tre men√© en adaptant les logiciels. Une chose que vous devez consid√©rer lorsque vous √©tudiez comment les applications utilisent MySQL est que si elles sont initialement destin√©es aux versions ant√©rieures √† 5.0, elles pourraient alors ne plus √™tre compatibles avec les nouvelles fonctionnalit√©s comme le mode strict ajout√© dans cette version. Si cela est le cas, de telles applications pourraient √™tre limit√©es aux capacit√©s des plus vieilles versions pour lesquelles elles ont √©t√© √©crites et pourraient demander un effort d'adaptation pour profiter des fonctionnalit√©s modernes de MySQL.
</p>
<h2>Fiabilit√©</h2>
<h3>Int√©grit√© des donn√©es</h3>
<p>
Avant la version 5.0, MySQL m√©ritait clairement sa r√©putation √† propos de l'incoh√©rence des donn√©es ins√©r√©es dans la base. <a href="http://dev.mysql.com/tech-resources/articles/mysql-data-integrity.html" target="_blank">Guaranteeing Data Integrity with MySQL 5.0</a> explique les probl√®mes avec ces plus vieilles versions de MySQL, et comment ils pourraient √™tre √©vit√©s en utilisant le <a href="http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html" target="_blank">Mode SQL</a> strict disponible dans la version actuelle. Bien entendu, tout client MySQL a la possibilit√© de changer son mode SQL et contourner ainsi ce comportement, avec comme cons√©quences que ces validations de contraintes ne soient plus forc√©ment assur√©es cot√© serveur.
</p>
<p>
PostgreSQL a toujours √©t√© strict sur la validation des donn√©es avant de les ins√©rer dans la base de donn√©es, et il n'existe aucune alternative au client pour contourner ces v√©rifications.
</p>
<h3>Transactions et moteur interne de la base de donn√©e</h3>
<p>
<a href="http://dev.mysql.com/doc/refman/5.0/fr/myisam-storage-engine.html" target="_blank">MyISAM</a> est le composant interne de MySQL √† l'origine de sa r√©putation de rapidit√©. Ce moteur a d'excellentes performances en lecture et son analyseur est vraiment tr√®s efficace pour les requ√™tes simples, ce qui le rend tr√®s rapide pour les applications en lecture intensive comme les applications web qui emploient de simples SELECT. Cependant, il est commun√©ment connu que MyISAM est plus vuln√©rable aux <a href="http://dev.mysql.com/doc/refman/5.0/fr/corrupted-myisam-tables.html" target="_blank">corruptions de donn√©es</a> que la plupart des bases de donn√©es s√©rieuses ne sauraient tol√©rer, et en cas d'incident, il peut s'√©couler un temps non n√©gligeable durant lequel il reconstruit ses index avant que le serveur ne puisse red√©marrer. En outre, il ne supporte pas les cl√©s √©trang√®res ou les transactions qui auraient permis √† la base d'avoir des propri√©t√©s <a href="http://fr.wikipedia.org/wiki/Propri%C3%A9t%C3%A9s_ACID" target="_blank">ACID</a>. MyISAM a aussi un probl√®me avec les acc√®s concurrents en lecture et mise √† jour car ne supporte que les verrous de niveau table.
</p>
<p>
L'int√©gration du <a href="http://dev.mysql.com/doc/refman/5.0/fr/innodb.html" target="_blank">moteur de stockage InnoDB</a> √† MySQL a grandement surpass√© MyISAM en terme d'int√©grit√© des donn√©es, ajoutant un m√©canisme de r√©-ex√©cution des journaux plus robuste pour la restauration apr√®s incident et supportant des transactions ACID. Cependant, cette nouvelle approche apporte aussi beaucoup plus de charge, et les tables InnoDB ne sont pas aussi rapides que les MyISAM pour les acc√®s en lecture pure. De plus, les tables des m√©tadonn√©es internes √† MySQL sont toujours stock√©es en MyISAM, ce qui signifie qu'elles restent vuln√©rables aux traditionnels probl√®mes de corruption associ√©s √† ce moteur de stockage. Ce probl√®me peut-√™tre contourn√© en utilisant plusieurs <a href="http://forge.mysql.com/wiki/MySQL_Internals_Data_and_meta-data_locking" target="_blank">m√©thodes de verrous</a> compliqu√©s qui peuvent potentiellement bloquer l'√©dition d'une table pendant un certain temps.
</p>
<p>
Vous devez aussi savoir que dans certaines conditions il est possible de cr√©er ce que vous pensez √™tre une table InnoDB transactionnel s√ªre, mais que vous obteniez en r√©alit√© du MyISAM non-ACID. Comme trop souvent avec MySQL, cela ne provoquera pas d'erreur, et il fera discr√®tement √† la place ce qu'il ne faut pas. Consultez ¬´&nbsp;<a href="http://sql-info.de/en/mysql/database-definition.html#2_4" target="_blank">Whoops, no InnoDB table support</a>&nbsp;¬ª pour savoir comment v√©rifier que vous avez ce que vous vouliez lors de la cr√©ation de vos tables sur un syst√®me qui utiliserait une vieille version de MySQL.
</p>
<p>
PostgreSQL a toujours port√© attention √† l'int√©grit√© des donn√©es au niveau transactionnel, se gardant ainsi des probl√®mes de verrou au minimum, et emp√™chant une erreur mat√©riel ou une configuration extr√™mement mauvaise de corrompre la base de donn√©es.
</p>
<p>
Il est int√©ressant de souligner que PostgreSQL int√®gre enti√®rement son moteur de base de donn√©e, alors que InnoDB est un produit sous licence double actuellement d√©tenu par la soci√©t√© Oracle. L'histoire ne dit pas comment Oracle modifiera InnoDB dans le futur sachant qu'ils sont eux-m√™me en concurrence avec MySQL AB, alors que PostgreSQL n'a aucun conflit d'int√©r√™ts de la sorte. MySQL AB d√©veloppe un nouveau moteur de base de donn√©es interne appel√© <a href="http://dev.mysql.com/doc/falcon/en/index.html" target="_blank">Falcon</a> afin de se lib√©rer de cette situation, mais historiquement, d√©velopper un de moteur de base rapide et fiable n√©cessite de nombreuses d'ann√©es de travail et de tests avant d'obtenir un produit m√ªr convenant √† la production. Les <a href="http://www.mysqlperformanceblog.com/2007/01/08/innodb-vs-myisam-vs-falcon-benchmarks-part-1/" target="_blank">premi√®res √©valuations</a> sugg√®rent que Falcon a √©norm√©ment de points d'approximations qui ont besoins d'√™tre corrig√©s.
</p>
<h3>Cl√©s √©trang√®res</h3>
<p>
L'impl√©mentation correcte des techniques de conception comme les <a href="http://fr.wikipedia.org/wiki/Forme_normale_(bases_de_donn%C3%A9es_relationnelles)" target="_blank">formes normales</a> repose sur la capacit√© de la base de donn√©es √† utiliser les <a href="http://en.wikipedia.org/wiki/Foreign_key">cl√©s √©trang√®res</a> pour repr√©senter les relations entre les tables. Avec MySQL, seul <a href="http://dev.mysql.com/doc/refman/5.0/fr/ansi-diff-foreign-keys.html" target="_blank">InnoDB supporte les cl√©s √©trang√®res</a>. Un probl√®me avec leur impl√©mentation est qu'elle est limit√©e et ignorera silencieusement plusieurs syntaxes standard. Par exemple, lors de la cr√©ation d'une table, m√™me avec la prochaine version 5.1 de MySQL <a href="http://dev.mysql.com/doc/refman/5.1/fr/create-table.html" target="_blank">la clause CHECK est analys√©e mais ignor√©e par tous les moteurs de stockage</a>. La philosophie de conception √† la base de PostgreSQL est de produire des erreurs ou des avertissements dans les situations similaires o√π une op√©ration est ambig√ºe ou non support√©e.
</p>
<h3>DDL transactionnel</h3>
<p>
Avec PostgreSQL, lorsque vous √™tes √† l'int√©rieur d'une transaction presque toute op√©ration peut √™tre annul√©e. Il existe quelque op√©rations irr√©versibles (comme cr√©er ou d√©truire une base ou un tablespace), mais les modifications classiques de table peuvent √™tre d√©faites en ex√©cutant un <a href="http://docs.postgresqlfr.org/8.2/sql-rollback.html" target="_blank">ROLLBACK</a> gr√¢ce aux m√©canismes de <a href="http://docs.postgresqlfr.org/8.2/wal.html" target="_blank">Write-Ahead Log</a>. Cela s'applique aussi aux importantes modifications <a href="http://fr.wikipedia.org/wiki/Langage_de_d%C3%A9finition_de_donn%C3%A9es" target="_blank">DDL</a> comme la cr√©ation de tables.
</p>
<p>
MySQL ne supporte aucun type d'annulation en utilisant MyISAM. Avec InnoDB, le serveur d√©clenche une <a href="http://dev.mysql.com/doc/refman/5.0/fr/implicit-commit.html" target="_blank">validation implicite</a> m√™me si le comportement normal d'auto-commit est d√©sactiv√©. Cel√† signifie qu'une unique modification de table ou changement similaire est imm√©diatement valid√©.
</p>
<p>
Les DBA PostgreSQL exp√©riment√© savent tirer parti de ces fonctionnalit√©s pour s'assurer lors de travaux compliqu√©s comme la mise √† jour d'un sch√©ma. Si vous placez tous ces changements dans une transaction, vous pouvez √™tre certain qu'elles seront toutes appliqu√©es de fa√ßon atomique ou pas du tout. Cela abaisse drastiquement la possibilit√© de corruption de la base de donn√©es par une erreur de frappe ou tout autre erreur de ce genre dans les modifications du sch√©ma, ce qui est particuli√®rement important lorsque vous modifiez plusieurs tables en relations o√π une erreur peut d√©truire la cl√© relationnelle. Il n'existe aucune m√©thode similaire pour ajuster s√ªrement plusieurs sections d'un sch√©ma avec MySQL.
</p>
<p>Voir <a href="http://www.postgresql.org/docs/techdocs.84" target="_blank">Transactional DDL in PostgreSQL: A Competitive Analysis</a> pour des exemples d√©taill√©s d√©montrant ces diff√©rences.</p>
<h2>Rapidit√©</h2>
<h3>Configuration par d√©faut</h3>
<p>
Historiquement, la configuration initiale de PostgreSQL √©tait dimensionn√©e pour supporter les plus vieilles variantes d'UNIX o√π l'allocation de grande quantit√© de m√©moire n'√©tait pas n√©cessairement possible. Le r√©sultat f√ªt que son utilisation de la m√©moire cache pour les r√©sultats √©tait, par d√©faut, tr√®s pessimiste. Sur les syst√®mes modernes qui poss√®dent beaucoup de m√©moire libre, cela handicap fortement les performances d'un PostgreSQL non configur√©.
</p>
<p>
Les valeurs par d√©faut sont beaucoup moins pessimistes dans les versions r√©centes. D√©sormais la configuration syst√®me est examin√©e au moment de l'initialisation de la base de la donn√©es et plus de m√©moire sera allou√©e s'il est possible de le faire. Le r√©sultat, c'est qu'une configuration par d√©faut non modifi√©e d'une version r√©cente de PostgreSQL s'ex√©cutera significativement mieux qu'une version plus ancienne. De plus, des changements dans la gestion du cache dans les versions 8.1 et 8.2 permettent m√™me une utilisation plus efficace du cache en quantit√© modeste.
</p>
<p>
Le premier des r√©glages sur les deux syst√®mes fonctionne de fa√ßon similaire, en allouant un bloc de m√©moire partag√©e d√©di√©e √† la base de donn√©es. MySQL r√®gle cela avec <a href="http://dev.mysql.com/doc/refman/5.0/fr/server-parameters.html" target="_blank">key_buffer_size</a> en utilisant MyISAM, et <a href="http://dev.mysql.com/doc/refman/5.0/en/innodb-parameters.html" target="_blank">innodb_buffer_pool_size</a> avec InnoDB (notez que vous aurez toujours besoin d'un espace MyISAM pour les tables syst√®mes m√™me lorsque InnoDB est le moteur de stockage principal de vos tables normales). PostgreSQL taille son espace m√©moire principal avec <a href="http://docs.postgresqlfr.org/8.2/runtime-config-resource.html" target="_blank">shared_buffers</a>.
</p>
<p>
Dans MySQL, key_buffer_size utilise par d√©faut 8&nbsp;Mo de m√©moire. Les premi√®res configurations de PostgreSQL alloueraient aussi 8&nbsp;Mo de m√©moire pour le cache shared_buffers si possible. Sur un serveur de type linux de g√©n√©ration actuelle, il est admis qu'une version r√©cente de PostgreSQL assigne au moins 24&nbsp;Mo par d√©faut √† shared_buffers lors de la cr√©ation du cluster.
</p>
<p>
Il est toujours possible de parcourir les fichiers de configuration afin de les adapter √† la m√©moire libre du serveur de la base de donn√©es, comme toutes ces valeurs par d√©faut sont dramatiquement sous-dimensionn√©es compar√© √† la quantit√© de RAM sur les syst√®mes actuels. Pour un serveur moderne d√©di√©, le principe de base pour PostgreSQL et MySQL est de dimensionner la m√©moire d√©di√©e √† au moins 1/4 de la m√©moire totale de la machine, pouvant grimper √† 1/2 de la RAM pour des quantit√©s sup√©rieures √† la normale. Il n'est cependant pas hors de question de pousser ce pourcentage encore plus haut sur des syst√®mes avec une quantit√© vraiment grande de RAM; Le guide de MySQL InnoDB sugg√®re m√™me que 80% n'est pas d√©raisonnable. Les directives initiales dans ce domaine peuvent √™tre trouv√©es dans <a href="http://www.westnet.com/~gsmith/content/postgresql/pg-5minute.htm" target="_blank">5-Minute Introduction to PostgreSQL Performance</a>, <a href="http://www.databasejournal.com/features/mysql/article.php/3367871" target="_blank">Optimizing the mysqld variables</a> et <a href="http://dev.mysql.com/doc/refman/5.0/fr/optimizing-the-server.html" target="_blank">Optimizing the MySQL Server</a>.
</p>
<h2>Tests de performances</h2>
<p>
Les tests de performances sont vraiment compliqu√©s √† r√©aliser correctement&nbsp;; cr√©er des tests vraiment comparables est un art complexe. Beaucoup des tests de performances qui ont pr√©sent√© MySQL comme plus rapide que PostgreSQL ont souffert de nombreuses zones de probl√®mes&nbsp;:</p>
<ul>
<li>Configuration : il n'est pas impossible de voir un MySQL configur√© compar√© √† une instance de PostgreSQL qui ne l'est pas. Comme indiqu√© plus haut, un PostgreSQL non configur√© a une utilisation particuli√®rement p√©ssimiste des ressources qu'il a √† sa disposition. Une comparaison r√©ellement juste utiliserait la m√™me quantit√© de m√©moire sur les deux syst√®mes.</li>
<li>Support des transactions : les tests de MyISAM impliquent des ¬´&nbsp;transactions&nbsp;¬ª qui ne fournissent aucune des garanties ACID que PostgreSQL offre. Cela revient g√©n√©ralement √† comparer des pommes √† des oranges.</li>
<li>Groupement de transactions : relatif au point pr√©c√©dent, PostgreSQL serait parfois affect√© par des tests simplets qui ne groupent pas correctement les transactions comme les applications le feraient. Cela n'ajoute pas seulement le co√ªt d'une transaction, mais peut-√™tre celui de centaines de milliers, au co√ªt total de la r√©alisation des modifications.</li>
<li>Comportements en s√©rie ou en parall√®le : un certain nombre de comportement de MyISAM sont ajust√©s pour n'avoir qu'un seul utilisateur acc√®dant √† la base. Par exemple, son utilisation des verrous de table lors d'acc√®s √† celles-ci implique qu'avec de nombreux acc√®s utilisateurs, MyISAM ralentira dramatiquement. Les performances de PostgreSQL se d√©gradent plus harmonieusement avec de grande quantit√© de connexions simultan√©es. M√©fiez-vous des tests qui n'impliquent qu'un simple flot de requ√™tes sur la base √† travers une unique connexion.</li>
</ul>
</p>
<h2>R√©sultats des tests de performances de Sun Microsystems 2007 jAppServer2004</h2>
<p>
Sun Microsystems, un constructeur neutre vendant du mat√©riel qui supporte beaucoup de bases de donn√©es diff√©rentes, a r√©cemment publi√© les r√©sultats de ses tests sur le tr√®s r√®glement√© <a href="http://www.spec.org/jAppServer2004/" target="_blank">SPECjAppServer2004</a> en utilisant <a href="http://www.spec.org/jAppServer2004/results/res2007q3/jAppServer2004-20070606-00065.html" target="_blank">PostgreSQL</a> et <a href="http://www.spec.org/jAppServer2004/results/res2007q2/jAppServer2004-20070411-00063.html" target="_blank">MySQL</a>. Le peu de <a href="http://www.mysqlperformanceblog.com/2007/07/25/mysql-and-postgresql-specjappserver-benchmark-results/" target="_blank">diff√©rences mat√©riels</a> entre les deux syst√®mes suffit pour ne pas comparer les deux r√©sultats directement. Mais le fait que les deux r√©sultats soient assez proches avec une configuration similaire sugg√®re que, malgr√© des performances diff√©rentes entre les deux bases, l'importance de cette diff√©rence n'est pas particuli√®rement grande avec ce type d'application.
</p>
<p>
Par comparaison, un <a href="http://www.spec.org/jAppServer2004/results/res2007q2/jAppServer2004-20070410-00060.html" target="_blank">Oracle sur HP</a> offre des r√©sultats comparable en performance sur du mat√©riel moins impressionnant, sugg√©rant ainsi que les deux bases de donn√©es open-source ont toujours du retard sur le meilleur des produits commerciaux en terme d'efficacit√© des performances. Certains pr√©tendent que la <a href="http://kevinclosson.wordpress.com/2007/07/18/application-server-benchmark-proves-postgresql-is-the-best-enterprise-database-server-new-specjappserver2004-cost-metric-introduced-too/" target="_blank">sup√©riorit√© d'Oracle</a> est encore plus grande en choisissant des exemples qui le mettent plus en valeur, mais assurez-vous de bien lire le <a href="http://blogs.ittoolbox.com/database/soup/archives/benchmark-brouhaha-17939" target="_blank">Brou-Ha-Ha du test</a> √† la recherche de commentaires √† propos du tarif en cours (et de relever quelques commentaires sur des <a href="http://www.spec.org/jAppServer2004/results/res2007q3/jAppServer2004-20070703-00073.html" target="_blank">r√©sultats secondaires</a> utilisant un serveur plus petit avec PostgreSQL). Notez que Josh Berkus est un employ√© de Sun et qu'il est aussi un des membres de <a href="http://www.postgresql.org/developer/bios" target="_blank">l'√©quipe principal de PostgreSQL</a>, et son commentaire devrait √™tre √©valu√© en cons√©quence.
</p>
<p>
Si vous faites une comparaison √©quitable en incluant le co√ªt des licences, la performance par dollar para√Æt semblable pour PostgreSQL et MySQL et tr√®s bon relativement √† la moyenne dans l'industrie de base de donn√©es. Il serait cependant faux de dire que ces solutions open-source sont toujours un meilleur choix que les offres commerciales comme Oracle en se basant seulement l√† dessus&nbsp;; les fonctionnalit√©s et performances absolues de chacune des solutions doivent certainement √™tre prises en compte aussi.
</p>
<h2>Verrou de transaction et extensibilit√©</h2>
<p>
PostgreSQL utilise un mod√®le de verrous robuste appel√© <a href="http://docs.postgresqlfr.org/8.2/mvcc.html#mvcc-intro" target="_blank">MVCC</a> qui limite les situations o√π les clients interf√®rent les uns avec les autres. Un court r√©sum√© du principal b√©n√©fice du MVCC serait ¬´&nbsp;les lecteurs ne sont jamais bloqu√©s par les √©critures&nbsp;¬ª. MVCC est utilis√© pour impl√©menter une <a href="http://www.postgresql.org/docs/current/static/transaction-iso.html" target="_blank">vision pessimiste</a> des quatre niveaux d'isolation standards de SQL : ¬´ lorsque vous s√©lectionnez le niveau "Read Uncommited" (Lecture de donn√©es non valid√©es), vous avez en r√©alit√© "Read Committed" (Lecture de donn√©es valid√©es), et quand vous s√©lectionnez "Repeatable Read" (Lecture r√©p√©t√©e) vous aurez en r√©alit√© "Serializable" (S√©rialisable), donc le niveau d'isolation actuel pourrait √™tre plus strict que ce que vous s√©lectionnez ¬ª. Le niveau d'isolation des transactions par d√©faut est "read commited".
</p>
<p>
InnoDB de MySQL <a href="http://dev.mysql.com/doc/refman/5.0/fr/innodb-multi-versioning.html" target="_blank">impl√©mente MVCC</a> en utilisant un espace d'annulation (rollback segment), inspir√© par la conception d'Oracle ; leur nouveau moteur Falcon fonctionne de la m√™me mani√®re. Les bases de donn√©es InnoDB supportent les quatre standards <a href="http://dev.mysql.com/doc/refman/5.0/en/innodb-transaction-isolation.html" target="_blank">d'isolation de transaction SQL</a>, celui par d√©faut √©tant ¬´&nbsp;Repeatable Read&nbsp;¬ª.
</p>
<p>
Lorsque l'on compare les deux mod√®les, PostgreSQL assure une s√©paration des clients tel que les donn√©es trait√©es soient toujours coh√©rentes dans toutes les circonstances ; comme la documentation MVCC l'√©tablit, ¬´&nbsp;la raison pour laquelle PostgreSQL fournit seulement deux niveaux d'isolation est qu'il s'agit de la seule fa√ßon raisonnable de faire correspondre les niveaux d'isolation standards avec l'architecture de contr√¥le des acc√®s simultan√©s multiversion&nbsp;¬ª. MySQL autorise des configurations o√π le code d'un client qui ne valide pas correctement ses transactions peut aboutir √† une vue des donn√©es qui serait consid√©r√©e comme incoh√©rente par les standards stricts de PostgreSQL. Cependant, dans les situations o√π il est acceptable d'avoir des lectures avec de petites incoh√©rences, avoir la possibilit√© d'utiliser des verrous moins stricts peut √™tre un avantage en terme de performances dans MySQL.
</p>
<p>
M√™me lorsque les deux syst√®mes sont configur√©s avec l'un des niveaux stricts des verrous de transaction, les diff√©rences entre les deux impl√©mentations sont suffisamment subtiles qu'il est difficile de d√©finir clairement quelle sera la plus appropri√©e pour une application particuli√®re. Une lecture recommand√©e pour comprendre ce sujet compliqu√© est <a href="http://www.amazon.com/Transactional-Information-Systems-Algorithms-Concurrency/dp/1558605088/" target="_blank">Transactional Information Systems: Theory, Algorithms, and the Practice of Concurrency Control</a> de Weikum &#038; Vossen. En utilisant les termes qui y sont employ√©s, PostgreSQL utilise un tri dat√© multiversion (multi-version timestamp ordering - MVTO) tandis que InnoDB et Oracle utilisent la coh√©rence des lectures multiversions (multi-version read consistency - MVRC). La principale diff√©rence est que PostgreSQL est avec-REFAIT/sans-ANNULE (with-REDO/no-UNDO) car il enregistre chaque version des lignes dans la table principale, alors que Oracle/InnoDB impl√©mente avec-REFAIT/avec-ANNULE (with-REDO/with-UNDO) o√π ils reconstruisent un bloc et/ou l'image d'une ligne depuis les journaux afin de proposer une lecture consistante. Si vous √™tes pr√™t √† aborder une troisi√®me architecture, celle de DB2 d'IBM, d'autres bonnes r√©f√©rences sur le propos pour comparaisons sont <a href="http://www.ibphoenix.com/main.nfs?page=ibp_mvcc_roman" target="_blank">A not-so-very technical discussion of Multi Version Concurrency Control</a> et <a href="http://www-128.ibm.com/developerworks/db2/library/techarticle/dm-0603wasserman2/index.html" target="_blank">Leverage your PostgreSQL V8.1 skills to learn DB2</a>. IBM n'est clairement pas fan de l'approche MVCC.
</p>
<p>
En parti √† cause de l'impl√©mentation tr√®s mature des verrous dans PostgreSQL (elle est toujours active et les performances du code associ√© est par cons√©quent critique), m√™me dans les situations o√π MySQL para√Æt initialement plus rapide PostgreSQL peut aller plus loin et arriver √† un d√©bit plus √©lev√© lorsque le nombre d'utilisateurs simultan√©s devient important. Un bon exemple de ce type de situation est d√©montr√© dans le test de base de donn√©es de <a href="http://tweakers.net/reviews/649/7" target="_blank">tweakers.net</a>.
</p>
<h2>Compter les lignes d'une table</h2>
<p>
Une op√©ration sur laquelle PostgreSQL est connu pour √™tre lent est de compter la totalit√© des lignes d'une table, typiquement en utilisant cette requ√™te :
</p>
<p class="code">SELECT COUNT(*) FROM table</p>
<p>
La raison de cette lenteur vient de l'impl√©mentation MVCC de PostgreSQL. Le fait que plusieurs transactions puissent voir diff√©rents √©tats de donn√©es implique qu'il ne peut y avoir de m√©thode simple pour "COUNT(*)" pour r√©sumer les donn√©es sur l'ensemble de la table ; dans un sens, PostgreSQL doit parcourir toutes les lignes. Cela aboutit normalement sur un parcours s√©quentiel lisant les informations de chaque ligne de la table.
</p>
<p>
Certains SGBD fournissent aux requ√™tes ¬´&nbsp;COUNT(*)&nbsp;¬ª la capacit√© de fonctionner en consultant un index. Malheureusement, dans PostgreSQL, cette strat√©gie ne fonctionne pas car l'information de visibilit√© MVCC n'est pas pr√©sente au niveau de l'index. Il est n√©cessaire d'examiner les lignes elles-m√™me pour d√©terminer si elles sont visibles pour la transaction.
</p>
<p>
Dans MySQL, les tables MyISAM conservent en cache l'information sur le nombre de ligne, faisant de ce type de d√©nombrement des op√©rations presque instantan√©es. C'est la raison pour laquelle tant de code MySQL utilisent cette construction pr√©sumant que c'est une op√©ration triviale. Mais si vous utilisez InnoDB, ce ne sera plus le cas. Voir <a href="http://www.mysqlperformanceblog.com/2006/12/01/count-for-innodb-tables/">COUNT(*) for Innodb Tables</a> et <a href="http://www.mysqlperformanceblog.com/2007/04/10/count-vs-countcol/">COUNT(*) vs COUNT(col)</a> pour les notes sur les limitations de MySQL dans ce domaine. MySQL admet que d√©ploy√© sur InnoDB, il ne peut assurer qu'un d√©nombrement de toutes les lignes soit rapide, et qu'ils sont donc prisonnier des m√™mes limitations que celles pr√©sentes dans PostgreSQL.
</p>
<p>
Il est utile de pr√©ciser que seule cette forme pr√©cise d'aggr√©gat doit √™tre si pessimiste ; si elle est compl√©t√©e avec une clause ¬´&nbsp;WHERE&nbsp;¬ª comme :
</p>
<p class="code">SELECT COUNT(*) FROM table WHERE status = 'quelque chose'</p>
<p>
PostgreSQL, MySQL et beaucoup d'autres impl√©mentations de base de donn√©es tireront profit de la disponibilit√©s des index pour le champ restreint afin de limiter le nombre d'enregistrements devant √™tre compt√©s, ce qui acc√©l√®re grandement de telles requ√™tes.
</p>
<p>
Une approche appr√©ci√©e pour les applications qui ont besoin de compter les lignes et qui peuvent tol√©rer de ne pas inclure les transactions en cours de r√©alisation, est d'utiliser un m√©canisme √† base de trigger pour compter les lignes de la table. Dans PostgreSQL, une autre alternative est d'utiliser le champs reltuples de la table <a href="http://docs.postgresqlfr.org/8.2/catalog-pg-class.html">pg_class</a> du catalogue lorsque seule une valeur approximative est n√©cessaire.
</p>
<h2>Jointure complexe</h2>
<p>
PostgreSQL utilise une m√©thode √©conomique d'optimisation des requ√™tes afin d'obtenir de bonne performances pour les diff√©rents types de jointures. Le co√ªt des requ√™tes est √©valu√© √† partir des <a href="http://docs.postgresqlfr.org/8.2/planner-stats.html">statistiques du planificateur</a> recueillies lors de l'analyse des tables et combin√© avec l'ajustements des <a href="http://docs.postgresqlfr.org/8.2/runtime-config-query.html">co√ªts du planificateur</a>, et des fonctionnalit√©s avanc√©es tel que le <a href="http://docs.postgresqlfr.org/8.2/geqo.html">Genetic Query Optimizer</a> permettent l'optimisation efficace de jointures tr√®s compliqu√©es.
</p>
<p>
Le planificateur de MySQL n'a pas ce niveau de sophistication, et les options de r√©glage pour le <a href="http://dev.mysql.com/doc/refman/5.0/fr/controlling-optimizer.html">Controlling Query Optimizer Performance</a> sont grossi√®res. Les d√©veloppeurs contournent cela en fournissant par exemple des <a href="http://dev.mysql.com/doc/refman/5.0/en/index-hints.html">astuces sur les index</a> afin de s'assurer que les jointures se fassent correctement. Pour faciliter cette t√¢che, MySQL fournit un <a href="#"http://dev.mysql.com/tech-resources/articles/using-new-query-profiler.html>Query Profiler</a> qui typiquement facilite le travail sur ces donn√©es EXPLAIN. En dehors de ces astuces, l'optimisation des sous-selections est une faiblesse connue de MySQL. <!--Il existe aussi un bug plut√¥t s√©rieux √† propos des sous-requ√™tes nulles dans MySQL 5.0 (qui semble toujours √™tre pr√©sent dans MySQL 5.1 pour le moment).--><!-- ndt : v√©rifier que le bug "subquery null handling bug" soit toujours d'actualit√©. les liens donn√©s ne sont plus correcte. Probl√®me signal√© √† gsmith, qui propose de retirer la phrase et reviendra vers nous si compl√©ment d'info. voir : http://dev.mysql.com/doc/refman/5.0/en/open-bugs.html http://dev.mysql.com/doc/refman/5.1/en/open-bugs.html ? -->
</p>
<p>
<a href="http://pooteeweet.org/files/webtuesday0407/finding_order_in_execution.pdf">Finding order in execution</a> (d√©finir l'ordre d'ex√©cution) fournit plusieurs points de comparaisons sur les diff√©rences de tra√Ætement des requ√™tes par les deux bases de donn√©es. Comme son optimisation automatique est plus robuste, PostgreSQL r√©alise g√©n√©ralement un meilleur travail avec les jointures compliqu√©es que MySQL -- Mais seulement si le planificateur est configur√© correctement (d√©finir une valeur trop petite pour <a href="http://docs.postgresqlfr.org/8.2/runtime-config-query.html">effective_cache_size</a> est une erreur commune) et que les statistiques sur les tables sont maintenues √† jour (typiquement via <a href="http://docs.postgresqlfr.org/8.2/maintenance.html">autovacuum</a>). Le fait que vous deviez donner √† l'optimiseur de PostgreSQL des informations correctes sur lesquelles travailler, est quelque chose de controvers√© dans le choix de conception. Les d√©veloppeurs principaux de PostgreSQL estiment qu'il est plus important de se concentrer sur l'am√©lioration de l'optimiseur pour qu'il fonctionne correctement dans tous les cas plut√¥t que d'autoriser les requ√™tes √† introduire des modifications dans le plan comme contournement aux probl√®mes.
</p>
<p>
Il y a quelques outils compl√©mentaires pour explorer le planificateur de PostgreSQL. <a href="http://www.pgadmin.org/">pgAdmin</a> inclut une visionneuse de plan d'ex√©cution (<a href="http://www.pgadmin.org/images/screenshots/pgadmin3_macosx.png">exemple</a>). Une autre option est "Visual Explain", √† l'origine un composant de <a href="http://sources.redhat.com/rhdb/visualexplain.html">RedHat</a> qui est maintenant maintenu par <a href="http://www.enterprisedb.com/">Enterprise DB</a>. Il est inclus dans l'offre EnterpriseDB Advanced Server et peut √™tre compil√© avec une installation de PostgreSQL en utilisant le code source du paquet <a href="http://www.enterprisedb.com/products/download.do">Developer Studio</a>.
</p>
<h2>Remerciements et Remarques</h2>
<p>
Ce document a √©t√© √©crit par <a href="http://www.westnet.com/~gsmith/">Greg Smith</a> incluant de pertinentes contributions de <a href="http://linuxdatabases.info/">Christopher Browne</a>, <a href="http://pooteeweet.org/">Lukas Kahwe Smith</a>, et de beaucoup d'autres membres de la <a href="http://www.postgresql.org/community/lists/">liste de diffusion</a> Advocacy. Quelques unes des r√©f√©rences cit√©es dans ce document proviennent d'articles √©crits par ces m√™mes auteurs.
</p>
<p>
Corrections, suggestions, coup de gueule, et autres remarques peuvent √™tre adress√©s √† <a href="mailto:gsmith@gregsmith.com">Greg</a>, un consultant ind√©pendant dont le seul lien avec l'√©quipe de d√©veloppement mondial consiste √† soumettre des patchs pour am√©liorer la future version 8.3.
</p>
<p>
Cet <a href="http://www.postgresql.org/docs/techdocs.83">article</a> a √©t√© traduit en fran√ßais par <b>Guillaume '<i>ioguix</i>' de Rorthais</b> et <b>Christophe '<i>KrysKool</i>' Chauvet</b>. Merci √©galement aux relecteurs.
</p>

		     </div></div>
<!--</div>
</div>
</div>
</div> -->
<a id="comment"></a>
<form method="post" action="http://drupal.postgresql.fr/?q=comment"><div>
<input type="hidden" name="edit[nid]" value="1432" />
</div></form>
<!-- end content -->
              </td>

    </tr>
    <tr><td colspan="2">

		<div class="pgTopNav">
		   <div class="pgTopNavLeft"> 
		     <img src="layout/images/nav_lft.png" width="7" height="23" alt="" />
		   </div>
		   <div class="pgTopNavRight">
		    <img src="layout/images/nav_rgt.png" width="7" height="23" alt="" />
		  </div>
		  <!--<ul class="pgTopNavList">-->
		  <ul class="pgTopNavList">
		   <li><a href="index03d2.html?q=" title="Retourner √† la page principale.">accueil</a> </li>
		   <li> <a href="indexf6e5.html?q=archive" title="Lire le contenu plus ancien dans notre archive.">archives</a> </li>
		   <li> <a href="index71c4.html?q=blog" title="Lire les blogues les plus r√©cents.">blogues</a> </li>

		   <li> <a href="indexf6fe.html?q=book" title="Lire et contribuer aux livres collaboratifs.">livres</a> </li>
		   <li> <a href="index79b7.html?q=forum">forums</a> </li>
		   <li> <a href="index729f.html?q=poll" title="Voir la liste des sondages de ce site.">sondages</a> </li>
		   <li> <a href="index4404.html?q=search" title="Chercher pour du contenu plus vieux.">recherche</a></li><li><a href="http://docs.postgresqlfr.org/" target="_blank">documentation </a></li>

		  </ul>

<!--
		   <li><a href="?q=" title="Retourner √† la page principale.">accueil</a> </li>
		   <li> <a href="?q=archive" title="Lire le contenu plus ancien dans notre archive.">archives</a> </li>
		   <li> <a href="?q=blog" title="Lire les blogues les plus r√©cents.">blogues</a> </li>
		   <li> <a href="?q=book" title="Lire et contribuer aux livres collaboratifs.">livres</a> </li>
		   <li> <a href="?q=forum">forums</a> </li>
		   <li> <a href="?q=poll" title="Voir la liste des sondages de ce site.">sondages</a> </li>
		   <li> <a href="?q=search" title="Chercher pour du contenu plus vieux.">recherche</a></li><li><a href="http://docs.postgresqlfr.org/" target="_blank">documentation </a></li>
-->
		  </ul>
	        </div>
    </td></tr>
   </table>
   <p style="text-align: center;">&copy;&nbsp;PostgreSQLFr, tous droits r√©serv√©s.<br>
Site d√©clar√© √† la CNIL sous le num√©ro 1074678, conform√©ment √† la Loi en vigueur.
</p>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-3921927-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
<p></p>
   
</body>

<!-- Mirrored from drupal.postgresql.fr/?q=node/1432 by HTTrack Website Copier/3.x [XR&CO'2006], Sun, 12 Oct 2008 15:59:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>